<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Zip Clock Redesign</title>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
      <style>
         :root {
         --bg-color: #f6f7ff;
         --nav-navy: #001d3d;
         --accent-blue: #1e62ff;
         --settings-blue: #5ea3f5;
         --sidebar-collapsed: 60px;
         --sidebar-expanded: 240px;
         --text-dim: #b0b8c1;
         --border-color: #e5e7eb;
         --panel-bg: #ffffff;
         /* Status Colors */
         --status-red-bg: #fee2e2;
         --status-red-text: #dc2626;
         --status-green-bg: #dcfce7;
         --status-green-text: #166534;
         }
         * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
         font-family: 'Roboto', sans-serif;
         }
         body {
         background-color: var(--bg-color);
         overflow: hidden;
         }
         /* --- Header Section --- */
         header {
         height: 50px;
         background-color: var(--nav-navy);
         display: grid;
         grid-template-columns: 1fr auto 1fr;
         align-items: center;
         padding: 0 15px;
         color: white;
         position: fixed;
         top: 0;
         width: 100%;
         z-index: 1000;
         }
         .header-left { display: flex; align-items: center; gap: 18px; }
         .app-logo { width: 28px; height: 28px; }
         .nav-link { display: flex; align-items: center; gap: 6px; font-size: 13px; color: #d1d5db; cursor: pointer; }
         .header-center { display: flex; align-items: center; gap: 12px; }
         .weather { display: flex; align-items: center; gap: 5px; font-size: 14px; }
         .weather i { font-size: 22px; }
         .v-divider { width: 1px; height: 20px; background: rgba(255,255,255,0.3); }
         .time-box { display: flex; align-items: baseline; gap: 4px; font-size: 14px; }
         .time-box b { font-size: 16px; font-weight: 500; }
         .time-box sup { font-size: 10px; font-weight: bold; }
         .header-right { display: flex; align-items: center; justify-content: flex-end; gap: 15px; }
         .store-tag { background: rgba(255,255,255,0.15); padding: 3px 10px; border-radius: 15px; font-size: 12px; display: flex; align-items: center; gap: 6px; }
         /* --- Sidebar Section --- */
         .sidebar {
         width: var(--sidebar-collapsed);
         background-color: var(--nav-navy);
         height: calc(100vh - 50px);
         position: fixed;
         top: 50px;
         left: 0;
         transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
         overflow: hidden;
         z-index: 999;
         display: flex;
         flex-direction: column;
         }
         .sidebar:hover { width: var(--sidebar-expanded); }
         .menu-list { list-style: none; flex-grow: 1; padding-top: 5px; }
         .menu-item { display: flex; align-items: center; height: 44px; padding: 0 18px; color: var(--text-dim); text-decoration: none; white-space: nowrap; }
         .menu-item i { min-width: 24px; font-size: 18px; }
         .menu-label { margin-left: 15px; font-size: 13px; opacity: 0; transition: opacity 0.2s; }
         .sidebar:hover .menu-label { opacity: 1; }
         .menu-item:hover, .menu-item.active { background: rgba(255,255,255,0.1); color: white; }
         .menu-item.active { border-left: 3px solid #3b82f6; background: #1a3557; }
         .sidebar-footer {
         width: var(--sidebar-collapsed);
         padding-bottom: 20px;
         display: flex;
         flex-direction: column;
         align-items: center;
         gap: 15px;
         }
         .settings-circle {
         width: 32px;
         height: 32px;
         background-color: var(--settings-blue);
         border-radius: 50%;
         display: flex;
         align-items: center;
         justify-content: center;
         color: white;
         font-size: 22px;
         cursor: pointer;
         box-shadow: 0 4px 6px rgba(0,0,0,0.2);
         }
         .help-main {
         width: 36px;
         height: 36px;
         background-color: var(--accent-blue);
         border-radius: 50%;
         display: flex;
         align-items: center;
         justify-content: center;
         color: white;
         font-size: 10px;
         font-weight: 800;
         cursor: pointer;
         }
         /* --- Main Content --- */
         .main-content {
         margin-left: var(--sidebar-collapsed);
         padding: 70px 15px 30px 15px;
         height: 100vh;
         overflow-y: auto;
         }
         .payroll-panel {
         background: var(--panel-bg);
         border-radius: 12px;
         box-shadow: 0 10px 25px rgba(0, 29, 61, 0.05);
         border: 1px solid var(--border-color);
         overflow: hidden;
         padding: 16px 18px 18px 18px;
         }
         .panel-header {
         padding: 1px 2px;
         display: flex;
         flex-direction: column;
         gap: 15px;
         }
         .panel-title {
         font-size: 18px;
         font-weight: 600;
         color: var(--nav-navy);
         display: flex;
         align-items: center;
         gap: 10px;
         }
         .header-separator { height: 1px; background-color: #f0f2f5; width: 100%; }
         /* --- Landing Screen Specifics --- */
         .date-filter-main {
         display: inline-flex;
         align-items: center;
         gap: 10px;
         padding: 6px 14px;
         background: #f1f7ff; 
         border: 1px solid #d0e1fd;
         border-radius: 8px;
         font-size: 13.5px;
         color: #1e62ff; 
         cursor: pointer;
         width: fit-content;
         }
         .payroll-table-container { width: 100%; overflow-x: auto; }
         table { width: 100%; border-collapse: collapse; text-align: left; }
         th { 
         padding: 18px 20px; 
         font-size: 12px; 
         font-weight: 700; 
         text-transform: uppercase; 
         color: #475569; 
         border-bottom: 2px solid #edf2f7; 
         background: #f8fafc;
         white-space: nowrap;
         }
         th i.bi-arrow-down-up { font-size: 11px; margin-left: 5px; color: var(--accent-blue); opacity: 0.7; }
         td { padding: 16px 20px; font-size: 14px; color: #334155; border-bottom: 1px solid #f1f5f9; }
         .val-currency { color: #94a3b8; font-size: 14px; margin-right: 4px; font-weight: 700; }
         .status-pill { 
         display: inline-block; 
         padding: 4px 14px; 
         border-radius: 50px; 
         font-size: 12px; 
         font-weight: 500; 
         min-width: 90px; 
         text-align: center; 
         }
         .status-unfinalized, .status-notsent { background: var(--status-red-bg); color: var(--status-red-text); }
         .status-finalized, .status-sent { background: var(--status-green-bg); color: var(--status-green-text); }
         .action-icon { font-size: 18px; color: var(--accent-blue); cursor: pointer; transition: transform 0.2s; }
         .action-icon:hover { transform: scale(1.2); }
         /* --- Detail Screen Specifics --- */
         .header-top-row { display: flex; justify-content: space-between; align-items: center; width: 100%; }
         .btn-back {
         display: flex;
         align-items: center;
         gap: 8px;
         padding: 6px 16px;
         background: #64748b;
         color: white;
         border-radius: 6px;
         font-size: 13px;
         cursor: pointer;
         border: none;
         }
         .print-btn { color: #64748b; font-size: 20px; cursor: pointer; }
         /* --- Modern Stepper Redesign --- */
         .stepper-full-container {
         display: flex;
         align-items: center;
         padding: 0px 200px;
         background-color: #f8fafc;
         border-bottom: 1px solid #f1f5f9;
         gap: 12px;
         }
         .stepper-track {
         display: flex;
         align-items: center;
         flex: 1;
         justify-content: space-between;
         }
         .nav-btn-box {
         width: 36px;
         height: 36px;
         border: 1px solid #e2e8f0;
         border-radius: 8px;
         display: flex;
         align-items: center;
         justify-content: center;
         color: #94a3b8;
         background: #fff;
         cursor: pointer;
         flex-shrink: 0;
         }
         .nav-btn-box.dark {
         background: #30b5c7;
         color: #fff;
         border-color: #30b5c7;
         }
         .step-item {
         background: #fff;
         border: 1px solid #e2e8f0;
         border-radius: 12px;
         padding: 12px 20px;
         font-size: 15px;
         font-weight: 600;
         color: #475569;
         display: flex;
         align-items: center;
         justify-content: center;
         gap: 12px;
         cursor: pointer;
         transition: all 0.2s ease;
         flex: 1;
         max-width: 320px;
         }
         .step-item.active {
         border-color: #5c67f2;
         background-color: #f1f3ff;
         color: #4338ca;
         box-shadow: 0 4px 6px -1px rgba(92, 103, 242, 0.1);
         }
         .connector-line { height: 1px; background-color: #999ca0; flex: 0.3; margin: 0 8px; }
         .badge-ui {
         width: 24px;
         height: 24px;
         border-radius: 50%;
         display: flex;
         align-items: center;
         justify-content: center;
         font-size: 12px;
         font-weight: 700;
         flex-shrink: 0;
         }
         .badge-ui.check { background: #e0f2fe; color: #0ea5e9; }
         .badge-ui.count { background: #5c67f2; color: #fff; }
         .badge-ui.count-alt { background: #e0f2fe; color: #0ea5e9; }
         .badge-ui.alert { background: #fee2e2; color: #ef4444; }
         /* --- Redesigned Review Hourly Punches Styles --- */
         .hourly-data-table th { font-size: 11px; padding: 12px 15px; background: #fdfdfe; }
         .hourly-data-table td { font-size: 13px; padding: 12px 15px; }
         .link-blue { color: #1e62ff; text-decoration: underline; cursor: pointer; }
         .eye-btn { color: #1e62ff; font-size: 18px; cursor: pointer; }
         .search-bar-container { padding: 15px 25px; display: flex; justify-content: flex-end; background: white; }
         .search-wrapper { position: relative; width: 250px; }
         .search-wrapper input { width: 100%; padding: 8px 35px 8px 15px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 13px; }
         .search-wrapper i { position: absolute; right: 12px; top: 10px; color: #94a3b8; }
         .modal-overlay {
         display: none;
         position: fixed;
         inset: 0;
         background: rgba(15,23,42,0.45);
         justify-content: center;
         align-items: center;
         z-index: 2000;
         }
         .modal-content {
         background: white; border-radius: 12px; width: 80%; max-width: 900px; 
         padding: 25px; box-shadow: 0 20px 40px rgba(0,0,0,0.2);
         }
         .hidden { display: none !important; }
         /* Modern Modal Styles */
         /* Modern Modal Container */
         .modern-modal-content {
         background: #ffffff;
         border-radius: 20px;
         border: none;
         box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
         max-width: 950px;
         width: 90%;
         padding: 0;
         overflow: hidden;
         }
         /* Header with subtle gradient/depth */
         .modern-modal-header {
         padding: 24px 32px;
         background: #ffffff;
         border-bottom: 1px solid #f1f5f9;
         display: flex;
         justify-content: space-between;
         align-items: center;
         }
         .modern-modal-body {
         flex: 1;
         overflow: hidden;
         overflow-y: auto;
         background: #f8fafc;
         }
         #tableView {
         overflow: visible;   /* allow natural height */
         }
         #graphView {
         height: 100%;
         overflow-y: auto;
         }
         /* Floating Table Styling */
         .clean-table {
         width: 100%;
         border-collapse: separate;
         border-spacing: 0 10px; /* Space between rows */
         }
         .clean-table th {
         padding: 0 16px 10px 16px;
         font-size: 11px;
         font-weight: 700;
         text-transform: uppercase;
         color: #64748b;
         letter-spacing: 0.05em;
         text-align: left;
         }
         .clean-table td {
         padding: 16px;
         background: #ffffff;
         border: none;
         font-size: 14px;
         color: #1e293b;
         transition: transform 0.2s ease;
         }
         /* Rounded corners for individual rows */
         .clean-table tr td:first-child { border-radius: 12px 0 0 12px; border-left: 1px solid #e2e8f0; border-top: 1px solid #e2e8f0; border-bottom: 1px solid #e2e8f0;}
         .clean-table tr td:last-child { border-radius: 0 12px 12px 0; border-right: 1px solid #e2e8f0; border-top: 1px solid #e2e8f0; border-bottom: 1px solid #e2e8f0;}
         /* Highlight Total Column */
         .total-cell {
         font-weight: 700;
         color: #ef4444 !important; /* Professional Red for loss */
         background: #fff5f5 !important; /* Very light red tint */
         }
         .modern-btn-close {
         padding: 10px 24px;
         background: #d62f2fff;
         color: white;
         border-radius: 8px;
         border: none;
         font-weight: 600;
         cursor: pointer;
         transition: background 0.2s;
         }
         .modern-btn-close:hover { background: #0f172a; }
         /* Container for the View Switcher */
         .view-toggle-container {
         display: flex;
         justify-content: space-between;
         align-items: center;
         padding: 0 32px 16px 32px;
         }
         /* Tabular Row Styling */
         .modern-table {
         width: 100%;
         border-collapse: separate;
         border-spacing: 0 12px; /* Space between rows */
         }
         .modern-table th {
         font-size: 11px;
         font-weight: 700;
         text-transform: uppercase;
         color: #64748b;
         padding: 0 20px;
         text-align: left;
         border: none;
         }
         .modern-table td {
         padding: 18px 20px;
         background: #ffffff;
         border-top: 1px solid #f1f5f9;
         border-bottom: 1px solid #f1f5f9;
         font-size: 14px;
         color: #334155;
         }
         /* Rounded edges for a "Card" look */
         .modern-table td:first-child { border-left: 1px solid #f1f5f9; border-radius: 12px 0 0 12px; }
         .modern-table td:last-child { border-right: 1px solid #f1f5f9; border-radius: 0 12px 12px 0; }
         .bar {
         width: 40px; /* Wider bars for a more "decent" look */
         background: linear-gradient(180deg, #3b82f6, #1e40af);
         border-radius: 4px 4px 0 0;
         transition: height 0.3s ease;
         }
         .bar:hover { filter: brightness(1.1); }
         .bar-label { font-size: 12px; color: #64748b; margin-top: 10px; font-weight: 500; }
         .bar-value { font-size: 11px; font-weight: 700; color: #1e293b; margin-bottom: 5px; }
         .hidden { display: none !important; }
         /* Expanded Modal for Full Screen Graph */
         .expanded-modal {
         width: 95% !important;
         max-width: 1200px !important;
         height: 80vh;
         display: flex;
         flex-direction: column;
         }
         /* Formal Tabular Layout */
         .formal-table {
         width: 100%;
         border-collapse: collapse;
         background: white;
         }
         .formal-table th {
         background: #f1f5f9;
         padding: 14px 20px;
         font-size: 11px;
         font-weight: 700;
         text-transform: uppercase;
         color: #475569;
         border-bottom: 2px solid #e2e8f0;
         text-align: left;
         }
         .formal-table td {
         padding: 16px 20px;
         border-bottom: 1px solid #f1f5f9;
         font-size: 14px;
         color: #334155;
         }
         .formal-table tr:hover { background: #f8fafc; }
         /* Full-Screen Graph Styling */
         .y-axis {
         display: flex;
         flex-direction: column;
         justify-content: space-between;
         align-items: flex-end;
         padding-right: 10px;
         font-size: 11px;
         font-weight: 600;
         color: #64748b;
         }
         .x-axis {
         grid-column: 2 / 3;
         display: flex;
         justify-content: space-around;
         align-items: center;
         border-top: 2px solid #cbd5e1;
         font-size: 12px;
         font-weight: 600;
         color: #64748b;
         }
         .graph-bars {
         display: flex;
         align-items: flex-end;
         justify-content: space-around;
         border-left: 2px solid #cbd5e1;
         border-bottom: 2px solid #cbd5e1;
         padding: 20px;
         }
         /* Axis Labels */
         .y-axis-label {
         position: absolute;
         left: -70px;
         top: 50%;
         transform: rotate(-90deg);
         font-size: 12px;
         font-weight: 600;
         color: #64748b;
         }
         .x-axis-label {
         position: absolute;
         bottom: -50px;
         left: 50%;
         transform: translateX(-50%);
         font-size: 12px;
         font-weight: 600;
         color: #64748b;
         }
         /* Responsive Modal Container */
         /* Responsive Modal Container */
         .dynamic-modal {
         width: 90%;
         max-width: 1100px;
         background: #ffffff;
         border-radius: 20px;
         display: flex;
         flex-direction: column;
         overflow: hidden;
         transition: height 0.25s ease;
         }
         .dynamic-modal.table-mode {
         height: auto;
         max-height: 85vh;
         }
         /* Graph mode â†’ fixed, taller */
         .dynamic-modal.graph-mode {
         height: auto;
         }
         /* Formal Tabular Layout */
         .formal-table {
         width: 100%;
         border-collapse: collapse;
         }
         .formal-table th {
         background: #f1f5f9;
         padding: 16px;
         font-size: 11px;
         font-weight: 700;
         text-transform: uppercase;
         color: #475569;
         border-bottom: 2px solid #e2e8f0;
         }
         .formal-table td {
         padding: 16px;
         border-bottom: 1px solid #f1f5f9;
         text-align: center;
         font-size: 14px;
         }
         /* Graph Viewport */
         .graph-viewport {
         height: 300px; /* Set a fixed height so bars can grow */
         display: grid;
         grid-template-columns: 60px 1fr;
         grid-template-rows: 1fr 40px;
         padding: 20px 20px 10px 10px;
         }
         .y-axis {
         display: flex;
         flex-direction: column;
         justify-content: space-between;
         align-items: flex-end;
         font-size: 12px;
         font-weight: 600;
         color: #64748b;
         padding-right: 10px;
         }
         .graph-bars {
         display: flex;
         align-items: flex-end; /* Anchors bars to the bottom */
         justify-content: space-around;
         height: 100%; /* Spans the full viewport height */
         border-left: 2px solid #cbd5e1;
         border-bottom: 2px solid #cbd5e1;
         padding: 20px 10px 0 10px;
         }
         .x-axis {
         grid-column: 2 / 3;
         display: flex;
         justify-content: space-around;
         align-items: center;
         border-top: 2px solid #cbd5e1;
         font-size: 12px;
         font-weight: 600;
         color: #64748b;
         }
         .bar-wrapper {
         display: flex;
         flex-direction: column;
         align-items: center;
         justify-content: flex-end;
         height: 100%; /* Required for internal percentage scaling */
         flex: 1;
         }
         .bar-value-label {
         margin-bottom: 8px;
         font-size: 12px;
         font-weight: 700;
         color: #1e293b;
         }
         .kpi-container {
         display: grid; 
         grid-template-columns: repeat(4, 1fr); 
         gap: 20px; 
         padding: 20px 32px; 
         background: #f8fafc;
         }
         .kpi-card {
         background: #ffffff;
         border-radius: 12px;
         padding: 12px 16px;  
         border: 1px solid #eef2f6;
         /* The top border requested */
         border-top-width: 4px; 
         box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
         display: flex;
         flex-direction: column;
         transition: all 0.2s ease;
         position: relative;
         overflow: hidden;
         }
         .kpi-card:hover {
         transform: translateY(-3px);
         box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
         }
         /* Border Colors */
         .border-blue { border-top-color: #3b82f6; }
         .border-green { border-top-color: #22c55e; }
         .border-orange { border-top-color: #f59e0b; }
         .border-purple { border-top-color: #a855f7; }
         /* Subtle accent line on the left */
         .fix-kpi-card::before, 
         .kpi-card::before {
         display: none !important;
         }
         .kpi-header span {
         font-size: 12px;
         font-weight: 600;
         text-transform: uppercase;
         letter-spacing: 0.05em;
         color: #64748b;
         }
         .kpi-card b {
         display: block;
         margin-top: 4px;
         margin-bottom: 8px;
         font-size: 24px;
         font-weight: 800;
         color: #1e293b;
         letter-spacing: -0.02em;
         }
         .toggle-pill {
         display:flex;
         gap:6px;
         }
         .toggle-pill button {
         padding:6px 14px;
         border-radius:20px;
         border:1px solid #e2e8f0;
         background:#fff;
         font-size:13px;
         cursor:pointer;
         }
         .toggle-pill button.active {
         background:#1e62ff;
         color:#fff;
         border-color:#1e62ff;
         }
         .metric-dropdown {
         padding:6px 10px;
         border-radius:6px;
         border:1px solid #e2e8f0;
         }
         .eye-graph-viewport {
         height: 100%;
         display: grid;
         grid-template-columns: 70px 1fr;
         grid-template-rows: 1fr 50px;
         }
         .eye-graph-bars {
         display: flex;
         align-items: flex-end !important; /* Forces bars to sit on the X-axis */
         justify-content: space-around;
         height: 100%;
         padding-top: 20px; /* Space for the top labels */
         }
         .eye-bar {
         transition: height 0.4s ease-out;
         width: 32px;
         background: #6366f1; /* Professional Indigo */
         border-radius: 4px 4px 0 0;
         }
         .eye-bar:hover {
         background: #4f46e5;
         filter: drop-shadow(0 0 8px rgba(99, 102, 241, 0.4));
         }
         .bar-column {
         display: flex;
         flex-direction: column;
         align-items: center;
         justify-content: flex-end; /* This is the key for alignment */
         height: 100%;
         }
         .eye-bar-label {
         font-size: 11px;
         font-weight: 700;
         color: #475569;
         margin-bottom: 6px;
         }
         .eye-x-axis span {
         font-size: 11px;
         font-weight: 600;
         color: #94a3b8;
         }
         .eye-x-axis {
         grid-column: 2 / 3;
         display: flex;
         justify-content: space-around;
         align-items: center;
         font-weight: 600;
         color: #64748b;
         }
         .eye-y-axis {
         display: flex;
         flex-direction: column;
         justify-content: space-between;
         align-items: flex-end;
         padding-right: 10px;
         font-size: 12px;
         color: #64748b;
         }
         /* Extra-wide modal for payroll / punches */
         /* Extra-wide & tall modal only for Eye popup */
         .eye-modal-wide {
         width: 96vw;
         max-width: 1600px;
         height: 90vh;          /* ðŸ”‘ increase height */
         max-height: 900px;    /* prevents too tall on big screens */
         }
         .kpi-card {
         border-radius: 14px;
         padding: 18px;
         border: 1px solid #e2e8f0;
         }
         .kpi-card b {
         display: block;
         margin-top: 6px;
         font-size: 20px;
         font-weight: 700;
         }
         /* Total Hrs */
         .kpi-hrs {
         background: linear-gradient(135deg, #f8faff 0%, #e0e9ff 100%);
         border-top: 4px solid #3b5bdb; /* Executive Navy */
         }
         .kpi-pay {
         background: linear-gradient(135deg, #f2fff6 0%, #defce9 100%);
         border-top: 4px solid #16a34a; /* Classic Forest */
         }
         .kpi-ot {
         background: linear-gradient(135deg, #fffcf0 0%, #fef3c7 100%);
         border-top: 4px solid #d97706; /* Deep Gold */
         }
         .kpi-tips {
         background: linear-gradient(135deg, #f9f7ff 0%, #ede9fe 100%);
         border-top: 4px solid #7c3aed; /* Professional Plum */
         }
         .kpi-header {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: 4px;
         }
         .kpi-graph-icon {
         font-size: 14px;
         color: #64748b;
         cursor: pointer;
         padding: 6px;
         border-radius: 6px;
         }
         .kpi-graph-icon:hover {
         background: rgba(0,0,0,0.05);
         color: #1e293b;
         }
         /* Container for the new icon button */
         .kpi-icon-wrapper {
         background: rgba(255, 255, 255, 0.7);
         border: 1px solid rgba(0,0,0,0.05);
         border-radius: 6px;
         padding: 5px;
         color: #475569;
         transition: all 0.2s;
         }
         /* Modern hover effect */
         .kpi-icon-wrapper:hover {
         background: #ffffff;
         color: #1e293b;
         box-shadow: 0 2px 4px rgba(0,0,0,0.1);
         }
         /* Icon size inside wrapper */
         .kpi-icon-wrapper svg {
         width: 16px;
         height: 16px;
         }
         /* Refined Header Spacing */
         .kpi-header {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: 8px;
         }
         .kpi-header span {
         font-size: 11px;
         font-weight: 700;
         text-transform: uppercase;
         letter-spacing: 0.05em;
         color: var(--text-dim);
         }
         .kpi-icon-badge {
         width: 28px;
         height: 28px;
         border-radius: 10px;
         display: flex;
         align-items: center;
         justify-content: center;
         cursor: pointer;
         }
         .icon-bg-blue { background: #eff6ff; color: #3b82f6; }
         .icon-bg-green { background: #f0fdf4; color: #22c55e; }
         .icon-bg-orange { background: #fffbeb; color: #f59e0b; }
         .icon-bg-purple { background: #faf5ff; color: #a855f7; }
         /* The Value Text */
         .kpi-card b {
         display: block;
         font-size: 24px;
         font-weight: 800;
         color: var(--text-main);
         margin-bottom: 10px;
         letter-spacing: -0.03em;
         }
         .kpi-divider {
         height: 1px;
         background-color: var(--border-light);
         width: 100%;
         margin-bottom: 8px;
         }
         /* Footer (Yesterday/WTD) */
         .kpi-footer {
         display: flex;
         align-items: center;
         margin-top: 0;
         }
         .footer-item {
         flex: 1;
         display: flex;
         flex-direction: column;
         gap: 4px;
         }
         .footer-label {
         font-size: 10px;
         font-weight: 700;
         color: var(--text-dim);
         text-transform: uppercase;
         }
         .footer-value {
         font-size: 13px;
         font-weight: 700;
         color: #334155;
         }
         .v-sep {
         width: 1px;
         height: 35px;
         background-color: #d6dade;
         margin: 0 12px;
         }
         .graph-icon-svg {
         width: 20px;
         height: 20px;
         fill: currentColor;
         }
         /* FIX ISSUES TABLE */
         .fix-issues-table {
         width: 100%;
         border-collapse: separate;
         border-spacing: 0;
         background: #ffffff;
         border: 1px solid #e2e8f0;
         border-radius: 10px;
         overflow: hidden;
         }
         /* HEADER */
         .fix-issues-table thead th {
         background: #f8fafc;
         padding: 14px 18px;
         font-size: 12px;
         font-weight: 700;
         text-transform: uppercase;
         color: #475569;
         text-align: left;
         border-bottom: 1px solid #e2e8f0;
         }
         /* BODY CELLS */
         .fix-issues-table tbody td {
         padding: 16px 18px;
         font-size: 14px;
         color: #334155;
         vertical-align: middle;
         border-bottom: 1px solid #f1f5f9;
         }
         /* Remove last row border */
         .fix-issues-table tbody tr:last-child td {
         border-bottom: none;
         }
         /* Row hover (very subtle) */
         .fix-issues-table tbody tr:hover {
         background: #f9fafb;
         }
         /* Employee emphasis */
         .emp-name {
         font-weight: 600;
         color: #0f172a;
         }
         /* Issue pill */
         .issue-pill {
         display: inline-block;
         padding: 4px 12px;
         border-radius: 999px;
         font-size: 12px;
         font-weight: 600;
         background: #fee2e2;
         color: #dc2626;
         }
         /* Centered column */
         .text-center {
         text-align: center;
         }
         /* Actions */
         .actions-cell {
         white-space: nowrap;
         }
         .edit-icon {
         color: #2563eb;
         font-size: 18px;
         cursor: pointer;
         margin-right: 10px;
         }
         .delete-icon {
         color: #ef4444;
         font-size: 18px;
         cursor: pointer;
         }
         .edit-icon:hover,
         .delete-icon:hover {
         transform: scale(1.15);
         }
         .fix-issues-table thead th:last-child {
         text-align: center;
         width: 120px;              /* lock column width */
         }
         .fix-issues-table tbody td:last-child {
         text-align: center;
         vertical-align: middle;
         }
         .action-icons {
         display: inline-flex;
         align-items: center;
         justify-content: center;
         gap: 14px;
         }
         /* Icon refinements */
         .edit-icon,
         .delete-icon {
         font-size: 18px;
         cursor: pointer;
         line-height: 1;
         }
         .edit-icon { color: #2563eb; }
         .delete-icon { color: #ef4444; }
         .edit-icon:hover,
         .delete-icon:hover {
         transform: scale(1.15);
         }
         /* GRID */
         .fix-kpi-grid {
         display: grid;
         grid-template-columns: repeat(4, 1fr);
         gap: 20px;
         margin-bottom: 28px;
         }
         /* CARD */
         .fix-kpi-card {
         background: #ffffff;
         border-radius: 14px;
         padding: 18px 20px;
         border: 1px solid #e2e8f0;
         box-shadow: 0 4px 10px rgba(15, 23, 42, 0.04);
         position: relative;
         transition: all 0.25s ease;
         /* Added top border width */
         border-top: 4px solid transparent; 
         }
         /* LEFT ACCENT */
         .fix-kpi-card::before {
         display: none; 
         }
         /* HEADER */
         .fix-kpi-top {
         display: flex;
         justify-content: space-between;
         align-items: center;
         }
         .fix-kpi-top span {
         font-size: 13px;
         font-weight: 600;
         color: #475569;
         }
         .fix-kpi-top i {
         font-size: 18px;
         color: #94a3b8;
         }
         /* VALUE */
         .fix-kpi-value {
         margin-top: 10px;
         font-size: 20px;
         font-weight: 800;
         color: #0f172a;
         letter-spacing: -0.02em;
         }
         /* HOVER */
         .fix-kpi-card:hover {
         transform: translateY(-4px);
         box-shadow: 0 14px 24px rgba(15, 23, 42, 0.08);
         }
         /* ACCENT COLORS */
         .accent-blue::before { background: #3b82f6; }
         .accent-orange::before { background: #f59e0b; }
         .accent-red::before { background: #ef4444; }
         .accent-purple::before { background: #8b5cf6; }
         /* ICON BASE */
         .fix-kpi-top i {
         font-size: 18px;
         opacity: 0.9;
         }
         .accent-blue { border-top-color: #3b82f6; }
         .accent-orange { border-top-color: #f59e0b; }
         .accent-red { border-top-color: #ef4444; }
         .accent-purple { border-top-color: #8b5cf6; }
         /* Ensure icons still match the theme */
         .accent-blue .fix-kpi-top i   { color: #3b82f6; background: rgba(59, 130, 246, 0.12); }
         .accent-orange .fix-kpi-top i { color: #f59e0b; background: rgba(245, 158, 11, 0.14); }
         .accent-red .fix-kpi-top i    { color: #ef4444; background: rgba(239, 68, 68, 0.12); }
         .accent-purple .fix-kpi-top i { color: #8b5cf6; background: rgba(139, 92, 246, 0.12); }
         /* ICON COLOR MATCHES TILE */
         .accent-blue .fix-kpi-top i   { color: #3b82f6; }
         .accent-orange .fix-kpi-top i{ color: #f59e0b; }
         .accent-red .fix-kpi-top i   { color: #ef4444; }
         .accent-purple .fix-kpi-top i{ color: #8b5cf6; }
         .fix-kpi-top i {
         padding: 6px;
         border-radius: 8px;
         background: rgba(0,0,0,0.03);
         }
         .accent-blue .fix-kpi-top i {
         background: rgba(59, 130, 246, 0.12);
         }
         .accent-orange .fix-kpi-top i {
         background: rgba(245, 158, 11, 0.14);
         }
         .accent-red .fix-kpi-top i {
         background: rgba(239, 68, 68, 0.12);
         }
         .accent-purple .fix-kpi-top i {
         background: rgba(139, 92, 246, 0.12);
         }
         /* Action header container */
         .actions-header {
         position: relative;
         text-align: center;
         white-space: nowrap;
         }
         /* Search icon */
         .action-search-icon {
         margin-left: 8px;
         font-size: 14px;
         color: #64748b;
         cursor: pointer;
         transition: color 0.2s ease;
         }
         .action-search-icon:hover {
         color: #1e62ff;
         }
         /* Search input (inline dropdown style) */
         #actionSearchInput {
         position: absolute;
         top: 36px;
         right: 0;
         width: 180px;
         padding: 6px 10px;
         font-size: 12px;
         border-radius: 6px;
         border: 1px solid #e2e8f0;
         background: #ffffff;
         box-shadow: 0 6px 12px rgba(0,0,0,0.08);
         display: none;
         z-index: 10;
         }
         /* FILTER BAR */
         .fix-filter-bar {
         display: flex;
         justify-content: center;
         margin: 10px 0 18px;
         position: relative;
         }
         /* FILTER BUTTON */
         .filter-btn {
         display: flex;
         align-items: center;
         gap: 6px;
         padding: 6px 16px;
         border-radius: 999px;
         background: #ffffff;
         border: 1px solid #c7d2fe;
         color: #2563eb;
         font-size: 13px;
         font-weight: 600;
         cursor: pointer;
         box-shadow: 0 2px 6px rgba(37,99,235,0.15);
         }
         .filter-btn i {
         font-size: 14px;
         }
         /* POPOVER */
         .filter-popover {
         position: absolute;
         top: 40px;
         background: #ffffff;
         border-radius: 12px;
         width: 260px;
         border: 1px solid #e2e8f0;
         box-shadow: 0 14px 30px rgba(0,0,0,0.15);
         display: none;
         z-index: 50;
         }
         /* HEADER */
         .filter-header {
         padding: 12px 14px;
         font-size: 14px;
         font-weight: 700;
         border-bottom: 1px solid #e2e8f0;
         display: flex;
         justify-content: space-between;
         align-items: center;
         }
         .filter-header i {
         cursor: pointer;
         }
         /* BODY */
         .filter-body {
         padding: 12px 14px;
         display: flex;
         flex-direction: column;
         gap: 10px;
         }
         .filter-body label {
         font-size: 13px;
         display: flex;
         gap: 8px;
         align-items: center;
         }
         /* FOOTER */
         .filter-footer {
         padding: 10px 14px;
         border-top: 1px solid #e2e8f0;
         display: flex;
         justify-content: space-between;
         }
         .btn-clear {
         background: #fecaca;
         border: none;
         padding: 6px 12px;
         border-radius: 999px;
         font-size: 12px;
         font-weight: 600;
         cursor: pointer;
         }
         .btn-apply {
         background: #93c5fd;
         border: none;
         padding: 6px 14px;
         border-radius: 999px;
         font-size: 12px;
         font-weight: 600;
         cursor: pointer;
         }
         .modal-overlay {
         position: fixed;
         inset: 0;
         background: rgba(15,23,42,0.45);
         display: flex;
         justify-content: center;
         align-items: center;
         z-index: 2000;
         }
         .modal-box {
         background: #ffffff;
         width: 85%;
         max-width: 1000px;
         border-radius: 14px;
         overflow: hidden;
         box-shadow: 0 25px 50px rgba(0,0,0,0.25);
         }
         /* HEADER */
         .modal-header {
         padding: 14px 18px;
         border-bottom: 1px solid #e2e8f0;
         font-size: 16px;
         font-weight: 700;
         display: flex;
         justify-content: space-between;
         align-items: center;
         }
         .modal-header i {
         cursor: pointer;
         color: #64748b;
         }
         /* BODY */
         .modal-body {
         padding: 16px;
         max-height: 70vh;
         overflow-y: auto;
         }
         .hidden { display: none; }
         .accent-green::before { background:#22c55e; }
         .accent-green i {
         color:#22c55e;
         background:rgba(34,197,94,.12);
         }
         /* Reuse Fix Issues table spacing */
         .extra-pay-table thead th,
         .extra-pay-table tbody td {
         padding: 14px 18px;
         font-size: 14px;
         vertical-align: middle;
         }
         /* Amount column right aligned */
         /* AMOUNT column alignment â€“ header + body */
         .extra-pay-table th:nth-child(4),
         .extra-pay-table td:nth-child(4) {
         text-align: left;
         padding-right: 24px;   /* matches other numeric columns */
         }
         /* Actions centered */
         .extra-pay-table th:last-child,
         .extra-pay-table td:last-child {
         text-align: center;
         width: 140px;
         }
         #extraPaySearchInput {
         display: none;
         position: absolute;
         right: 0;
         top: 36px;
         width: 180px;
         padding: 6px 10px;
         font-size: 12px;
         border-radius: 6px;
         border: 1px solid #e2e8f0;
         box-shadow: 0 6px 12px rgba(0,0,0,0.08);
         }
         .extra-pay-add-btn {
         display: flex;
         align-items: center;
         gap: 6px;
         background: #2563eb;
         color: #ffffff;
         border: none;
         padding: 8px 16px;
         border-radius: 8px;
         font-size: 13px;
         font-weight: 600;
         cursor: pointer;
         box-shadow: 0 4px 10px rgba(37,99,235,0.25);
         transition: all 0.2s ease;
         margin-right: 10px;
         }
         .extra-pay-add-btn:hover {
         background: #1d4ed8;
         transform: translateY(-1px);
         }
         /* FORCE Amount column to behave like text columns */
         .fix-issues-table.extra-pay-table th:nth-child(4),
         .fix-issues-table.extra-pay-table td:nth-child(4) {
         text-align: left !important;
         padding-left: 18px !important;
         }
         .kpi-count-badge {
         display: inline-flex;
         align-items: center;
         justify-content: center;
         margin-left: 8px;
         padding: 2px 8px;
         font-size: 12px;
         font-weight: 700;
         line-height: 18px;
         color: #2563eb;
         background: #eef2ff;
         border-radius: 999px;
         vertical-align: middle;
         }
         .submit-summary-strip{
         display:grid;
         grid-template-columns:repeat(5,1fr);
         gap:16px;
         margin-bottom:20px;
         }
         .pay-tile{
         background:#fff;
         border-radius:12px;
         padding:16px;
         border:1px solid #e2e8f0;
         text-align:center;
         }
         .pay-tile b{
         font-size:20px;
         font-weight:800;
         }
         .pay-tile span{
         font-size:12px;
         color:#64748b;
         }
         .pay-tile.highlight{
         background:#f0f9ff;
         border-color:#38bdf8;
         }
         .submit-action-panel{
         display:grid;
         grid-template-columns:auto 1fr auto;
         align-items:center;
         gap:20px;
         background:#fff;
         border-radius:12px;
         padding:18px 20px;
         border:1px solid #e2e8f0;
         }
         .employee-info{
         display:flex;
         gap:10px;
         align-items:center;
         }
         .employee-info i{
         font-size:28px;
         color:#2563eb;
         }
         .employee-info b{
         font-size:20px;
         }
         .payroll-message{
         font-size:14px;
         color:#334155;
         }
         .action-buttons{
         display:flex;
         gap:12px;
         }
         .btn-insights{
         background:#eef2ff;
         border:none;
         padding:10px 16px;
         border-radius:8px;
         font-weight:700;
         cursor:pointer;
         }
         .btn-finalize{
         background:#22c55e;
         color:#fff;
         border:none;
         padding:10px 20px;
         border-radius:8px;
         font-weight:800;
         }
         .payroll-insights{
         margin-top:30px;
         animation:fadeIn .25s ease;
         }
         .ai-insight-card{
         display:flex;
         gap:14px;
         background:#f8fafc;
         padding:18px;
         border-radius:14px;
         border:1px solid #e2e8f0;
         margin-bottom:20px;
         }
         .ai-insight-card i{
         font-size:26px;
         color:#6366f1;
         }
         .insights-kpi-grid{
         display:grid;
         grid-template-columns:repeat(4,1fr);
         gap:16px;
         margin-bottom:20px;
         }
         .insight-kpi{
         background:#fff;
         padding:14px;
         border-radius:12px;
         border:1px solid #e2e8f0;
         }
         .insights-charts{
         display:grid;
         grid-template-columns:1fr 1fr;
         gap:20px;
         margin-bottom:20px;
         }
         .chart-card{
         background:#fff;
         padding:16px;
         border-radius:14px;
         border:1px solid #e2e8f0;
         }
         .chart-placeholder{
         height:180px;
         background:#f1f5f9;
         border-radius:10px;
         display:flex;
         align-items:center;
         justify-content:center;
         color:#94a3b8;
         }
         @keyframes fadeIn{
         from{opacity:0; transform:translateY(10px)}
         to{opacity:1; transform:none}
         }
         /* ===== BAR CHART ===== */
         .bar-chart{
         height:180px;
         display:flex;
         align-items:flex-end;
         justify-content:space-around;
         padding:20px;
         }
         .bar{
         width:60px;
         border-radius:10px 10px 0 0;
         display:flex;
         align-items:flex-end;
         justify-content:center;
         position:relative;
         animation:growBar .8s ease;
         }
         .bar span{
         position:absolute;
         bottom:-22px;
         font-size:12px;
         color:#64748b;
         }
         .bar b{
         position:absolute;
         top:-24px;
         font-size:12px;
         font-weight:700;
         color:#1e293b;
         }
         .bar.regular{ background:#3b82f6; }
         .bar.ot{ background:#f59e0b; }
         .bar.dt{ background:#ef4444; }
         .bar.extra{ background:#8b5cf6; }
         @keyframes growBar{
         from{height:0}
         to{height:var(--h)}
         }
         /* ===== DONUT CHART ===== */
         .donut-chart{
         width:180px;
         height:180px;
         border-radius:50%;
         background:
         conic-gradient(
         #3b82f6 0% 62%,
         #22c55e 62% 82%,
         #f59e0b 82% 100%
         );
         margin:20px auto;
         position:relative;
         }
         .donut-center{
         position:absolute;
         inset:18px;
         background:#fff;
         border-radius:50%;
         display:flex;
         flex-direction:column;
         align-items:center;
         justify-content:center;
         }
         .donut-center b{
         font-size:18px;
         font-weight:800;
         }
         .donut-center span{
         font-size:12px;
         color:#64748b;
         }
         .pay-summary-row{
         display:flex;
         align-items:center;
         gap:14px;
         margin-bottom:24px;
         flex-wrap:wrap;
         }
         /* PAY TILE */
         .pay-summary-row{
         width:100%;
         display:grid;
         grid-template-columns:
         1fr auto
         1fr auto
         1fr auto
         1fr auto
         1.2fr; /* Payroll Amount slightly bigger */
         align-items:center;
         gap:16px;
         margin-bottom:24px;
         }
         /* PAY TILE */
         .pay-tile{
         width:100%;
         background:linear-gradient(180deg,#ffffff,#f8fafc);
         border-radius:14px;
         padding:16px 18px;
         border:1px solid #e2e8f0;
         text-align:center;
         box-shadow:0 4px 12px rgba(15,23,42,0.06);
         transition:all .2s ease;
         }
         .pay-tile:hover{
         transform:translateY(-2px);
         box-shadow:0 10px 22px rgba(15,23,42,0.12);
         }
         .pay-tile b{
         font-size:20px;
         font-weight:800;
         color:#0f172a;
         }
         .pay-tile span{
         font-size:12px;
         color:#64748b;
         display:block;
         margin-top:2px;
         }
         /* TOTAL TILE */
         .pay-tile.total{
         background:linear-gradient(135deg,#f0f9ff,#e0f2fe);
         border-color:#38bdf8;
         }
         .pay-tile.total b{
         font-size:22px;
         color:#0369a1;
         }
         /* MATH ICONS */
         .math-icon{
         display:flex;
         align-items:center;
         justify-content:center;
         font-size:22px;
         font-weight:800;
         color:#94a3b8;
         }
         @media (max-width: 1200px){
         .pay-summary-row{
         grid-template-columns:
         1fr auto
         1fr auto
         1fr auto
         1fr;
         }
         .math-icon.equals{
         display:none;
         }
         .pay-tile.total{
         grid-column:1 / -1;
         }
         }
         .pay-tile.total{
         animation:totalPulse 1.5s ease-in-out infinite alternate;
         }
         @keyframes totalPulse{
         from{ box-shadow:0 0 0 rgba(56,189,248,0.0); }
         to{ box-shadow:0 0 18px rgba(56,189,248,0.35); }
         }
         .insight-metric-row{
         display:grid;
         grid-template-columns:repeat(4,1fr);
         gap:16px;
         margin:20px 0 28px;
         }
         .metric-card{
         background:linear-gradient(180deg,#ffffff,#f9fafb);
         border:1px solid #e2e8f0;
         border-radius:14px;
         padding:16px 18px;
         box-shadow:0 6px 14px rgba(15,23,42,0.06);
         position:relative;
         }
         .metric-label{
         font-size:12px;
         font-weight:700;
         color:#64748b;
         text-transform:uppercase;
         }
         .metric-card b{
         font-size:26px;
         font-weight:800;
         display:block;
         margin-top:4px;
         color:#0f172a;
         }
         .metric-card small{
         font-size:12px;
         color:#64748b;
         }
         /* Highlights */
         .highlight-blue{
         background:linear-gradient(135deg,#f0f9ff,#e0f2fe);
         border-color:#38bdf8;
         }
         .highlight-red{
         background:linear-gradient(135deg,#fff5f5,#fee2e2);
         border-color:#fca5a5;
         }
         /* Info Icon */
         .metric-label-row{
         display:flex;
         align-items:center;
         justify-content:space-between;
         }
         .info-icon{
         font-size:14px;
         color:#ef4444;
         cursor:pointer;
         }
         /* Tooltip */
         .risk-tooltip{
         position:absolute;
         top:110%;
         right:0;
         width:260px;
         background:#0f172a;
         color:#fff;
         border-radius:12px;
         padding:14px;
         box-shadow:0 20px 40px rgba(0,0,0,0.3);
         z-index:50;
         }
         .risk-tooltip b{
         font-size:13px;
         margin-bottom:6px;
         display:block;
         }
         .risk-tooltip ul{
         margin:0;
         padding-left:16px;
         font-size:12px;
         }
         .risk-tooltip li{
         margin-bottom:6px;
         }
         .hidden{
         display:none;
         }
         .insights-header{
         position:relative;
         display:flex;
         align-items:center;
         justify-content:center;
         margin:32px 0 24px;
         }
         .insights-header::before{
         content:"";
         position:absolute;
         left:0;
         right:0;
         top:50%;
         height:1px;
         background:linear-gradient(
         to right,
         transparent,
         #e2e8f0,
         transparent
         );
         }
         .insights-header-text{
         position:relative;
         background:#ffffff;
         padding:6px 18px;
         border-radius:999px;
         font-size:13px;
         font-weight:800;
         letter-spacing:.12em;
         text-transform:uppercase;
         color:#0f172a;
         display:flex;
         align-items:center;
         gap:8px;
         box-shadow:0 4px 10px rgba(15,23,42,0.08);
         }
         .insights-header-text i{
         font-size:16px;
         color:#2563eb;
         }
         .insights-header{
         animation:fadeSlideIn .35s ease;
         }
         @keyframes fadeSlideIn{
         from{opacity:0; transform:translateY(6px)}
         to{opacity:1; transform:none}
         }
         /* ===== AI INSIGHTS CARD ===== */
         .ai-insights-card{
         background:linear-gradient(180deg,#ffffff,#f9fafb);
         border:1px solid #e2e8f0;
         border-radius:16px;
         padding:20px 22px;
         box-shadow:0 10px 22px rgba(15,23,42,0.08);
         margin-bottom:28px;
         }
         /* HEADER */
         .ai-insights-header{
         display:flex;
         align-items:center;
         justify-content:space-between;
         margin-bottom:14px;
         }
         .ai-title{
         display:flex;
         align-items:center;
         gap:10px;
         font-size:15px;
         font-weight:800;
         color:#0f172a;
         }
         .ai-title i{
         font-size:20px;
         color:#6366f1;
         }
         /* AI BADGE */
         .ai-badge{
         background:linear-gradient(135deg,#eef2ff,#e0e7ff);
         color:#4338ca;
         font-size:11px;
         font-weight:700;
         padding:4px 10px;
         border-radius:999px;
         letter-spacing:.04em;
         }
         /* LIST */
         .ai-insights-list{
         list-style:none;
         padding:0;
         margin:0;
         display:grid;
         gap:10px;
         }
         .ai-insights-list li{
         display:flex;
         align-items:flex-start;
         gap:10px;
         font-size:14px;
         color:#334155;
         line-height:1.5;
         }
         /* ICONS */
         .ai-insights-list i{
         font-size:16px;
         margin-top:2px;
         color:#64748b;
         }
         /* POSITIVE SIGNAL */
         .ai-insights-list li.positive i{
         color:#22c55e;
         }
         /* EMPHASIS */
         .ai-insights-list b{
         color:#0f172a;
         }
         /* ===== PAYROLL BREAKDOWN ===== */
         .payroll-breakdown {
         background: #ffffff;
         border: 1px solid #e2e8f0;
         border-radius: 14px;
         padding: 20px 22px;
         box-shadow: 0 6px 14px rgba(15,23,42,0.06);
         }
         .breakdown-row {
         display: flex;
         justify-content: space-between;
         align-items: center;
         padding: 10px 0;
         }
         .breakdown-row:not(:last-child) {
         border-bottom: 1px dashed #e2e8f0;
         }
         .breakdown-label {
         font-size: 13px;
         font-weight: 600;
         color: #64748b;
         }
         .breakdown-value {
         font-size: 15px;
         font-weight: 800;
         color: #0f172a;
         }
         .payroll-distribution {
         display: grid;
         grid-template-columns: 1fr 1fr; /* equal halves */
         gap: 32px;
         align-items: stretch;
         }
         .payroll-distribution .bar-chart {
         height: 100%;
         padding: 24px 28px;
         display: flex;
         align-items: flex-end;
         justify-content: space-evenly;
         }
         .payroll-distribution .bar {
         width: 52px;          /* visual consistency */
         border-radius: 10px 10px 0 0;
         }
         .payroll-distribution .bar b {
         top: -26px;
         font-size: 12px;
         font-weight: 700;
         }
         .payroll-distribution .bar span {
         bottom: -26px;
         font-size: 12px;
         font-weight: 600;
         }
         .compare-bar-chart{
         display:flex;
         justify-content:space-around;
         align-items:flex-end;
         height:220px;
         padding:20px;
         }
         .compare-col{
         text-align:center;
         }
         .compare-label{
         font-size:12px;
         font-weight:700;
         color:#64748b;
         display:block;
         margin-bottom:8px;
         }
         .compare-bars{
         display:flex;
         gap:6px;
         align-items:flex-end;
         height:160px;
         }
         .compare-bars .bar{
         width:28px;
         border-radius:6px 6px 0 0;
         animation:growBar .7s ease;
         color:#fff;
         font-size:10px;
         writing-mode:vertical-rl;
         transform:rotate(180deg);
         }
         .compare-bars .current{ background:#3b82f6; }
         .compare-bars .previous{ background:#94a3b8; }
         .chart-legend{
         margin-top:12px;
         font-size:12px;
         color:#64748b;
         display:flex;
         justify-content:center;
         gap:16px;
         }
         .dot{
         width:10px;
         height:10px;
         border-radius:50%;
         display:inline-block;
         }
         .current-dot{ background:#3b82f6; }
         .prev-dot{ background:#94a3b8; }
         .efficiency-chart{
         display:flex;
         justify-content:center;
         gap:60px;
         align-items:flex-end;
         height:200px;
         padding:20px;
         }
         .efficiency-bar{
         display:flex;
         flex-direction:column;
         align-items:center;
         }
         .efficiency-bar b{
         margin-bottom:6px;
         font-size:14px;
         font-weight:800;
         }
         .eff-bar{
         width:48px;
         height:var(--h);
         border-radius:10px 10px 0 0;
         animation:growBar .8s ease;
         }
         .eff-bar.current{ background:#22c55e; }
         .eff-bar.previous{ background:#94a3b8; }
         .efficiency-bar span{
         margin-top:6px;
         font-size:12px;
         color:#64748b;
         }
         .efficiency-insight{
         margin-top:14px;
         padding:10px 14px;
         border-radius:10px;
         font-size:13px;
         display:flex;
         align-items:center;
         gap:8px;
         }
         .efficiency-insight.success{
         background:#ecfdf5;
         color:#166534;
         }
         /* ================= FIX: SUBMIT PAYROLL GRAPHS ================= */
         /* Ensure bars actually get height */
         .compare-bars .bar,
         .eff-bar{
         height: var(--h);
         min-height: 6px;              /* prevents invisible bars */
         }
         /* Remove inverted rendering that hides bars */
         .compare-bars .bar{
         writing-mode: unset;
         transform: none;
         display: flex;
         align-items: flex-end;
         justify-content: center;
         }
         /* Safety: prevent overridden .bar styles from collapsing height */
         .compare-bars .bar{
         position: relative;
         }
         /* Efficiency bars alignment fix */
         .efficiency-chart{
         align-items: flex-end;
         }
         /* ===== FIX: PAYROLL ANALYSIS TABLE ALIGNMENT ===== */
         .formal-table {
         table-layout: fixed;
         }
         /* Header alignment */
         .formal-table th {
         text-align: center;
         }
         .formal-table th:first-child {
         text-align: left;
         }
         /* Body alignment */
         .formal-table td {
         text-align: center;
         vertical-align: middle;
         }
         /* Employee column */
         .formal-table td:first-child {
         text-align: left;
         font-weight: 700;
         color: #0f172a;
         }
         /* Cost / Hr column (money reads better right-aligned) */
         .formal-table th:nth-child(4),
         .formal-table td:nth-child(4) {
         text-align: right;
         padding-right: 24px;
         }
         /* Payroll Impact % */
         .formal-table th:nth-child(5),
         .formal-table td:nth-child(5) {
         text-align: center;
         }
         /* Risk Signal column */
         .formal-table th:last-child,
         .formal-table td:last-child {
         text-align: center;
         }
         /* Center pills properly */
         .formal-table td:last-child .status-pill {
         display: inline-flex;
         align-items: center;
         justify-content: center;
         min-width: 90px;
         }
         /* Optional: subtle row separation for clarity */
         .formal-table tbody tr {
         border-bottom: 1px solid #eef2f7;
         }
         /* ===== AI INSIGHTS 2x2 GRID ===== */
         .ai-insights-grid{
         display: grid;
         grid-template-columns: repeat(2, 1fr);
         gap: 20px;
         margin-top: 24px;
         }
         /* Responsive: stack on smaller screens */
         @media (max-width: 900px){
         .ai-insights-grid{
         grid-template-columns: 1fr;
         }
         }
         /* ===== FINAL APPROVAL PANEL ===== */
         .final-approval-panel{
         display:grid;
         grid-template-columns: 1fr auto auto;
         align-items:center;
         gap:28px;
         background: linear-gradient(180deg, #ffffff, #f8fafc);
         border:1px solid #e2e8f0;
         border-radius:16px;
         padding:22px 26px;
         box-shadow:0 10px 22px rgba(15,23,42,0.08);
         margin-top:32px;
         }
         /* Left block */
         .approval-left{
         display:flex;
         align-items:center;
         gap:14px;
         }
         .approval-icon{
         width:44px;
         height:44px;
         border-radius:12px;
         background:#ecfdf5;
         display:flex;
         align-items:center;
         justify-content:center;
         color:#16a34a;
         font-size:22px;
         }
         .approval-title{
         font-size:15px;
         font-weight:800;
         color:#0f172a;
         }
         .approval-meta{
         font-size:13px;
         color:#64748b;
         margin-top:2px;
         }
         /* Amount block */
         .approval-amount{
         text-align:right;
         }
         .approval-amount span{
         font-size:12px;
         font-weight:700;
         color:#64748b;
         text-transform:uppercase;
         letter-spacing:.04em;
         }
         .approval-amount b{
         display:block;
         font-size:24px;
         font-weight:900;
         color:#0f172a;
         margin-top:4px;
         }
         /* Actions */
         .approval-actions{
         display:flex;
         align-items:center;
         }
         .btn-note{
         display:flex;
         align-items:center;
         gap:8px;
         background:#eef2ff;
         color:#4338ca;
         border:1px solid #c7d2fe;
         padding:10px 16px;
         border-radius:10px;
         font-size:13px;
         font-weight:700;
         cursor:pointer;
         transition:all .2s ease;
         }
         .btn-note:hover{
         background:#e0e7ff;
         transform:translateY(-1px);
         }
         /* Responsive */
         @media (max-width: 900px){
         .final-approval-panel{
         grid-template-columns:1fr;
         text-align:left;
         }
         .approval-amount{
         text-align:left;
         }
         }
         /* ===== PAYROLL RISK SUMMARY PANEL ===== */
         .payroll-risk-panel{
         background:#ffffff;
         border:1px solid #e2e8f0;
         border-radius:16px;
         padding:20px 24px;
         margin-top:24px;
         box-shadow:0 8px 18px rgba(15,23,42,.06);
         }
         /* Header */
         .risk-header{
         display:grid;
         grid-template-columns:auto 1fr auto;
         align-items:center;
         gap:16px;
         margin-bottom:14px;
         }
         .risk-icon{
         width:44px;
         height:44px;
         border-radius:12px;
         background:#ecfdf5;
         color:#16a34a;
         display:flex;
         align-items:center;
         justify-content:center;
         font-size:22px;
         }
         .risk-title{
         font-size:15px;
         font-weight:800;
         color:#0f172a;
         }
         .risk-subtitle{
         font-size:13px;
         color:#64748b;
         margin-top:2px;
         }
         /* Badge */
         .risk-badge{
         background:#fff7ed;
         color:#c2410c;
         font-size:12px;
         font-weight:700;
         padding:6px 12px;
         border-radius:999px;
         border:1px solid #fed7aa;
         }
         /* Details */
         .risk-details{
         display:flex;
         flex-direction:column;
         gap:10px;
         margin-left:60px;
         }
         .risk-item{
         display:flex;
         align-items:center;
         gap:10px;
         font-size:13px;
         padding:10px 14px;
         border-radius:10px;
         }
         .risk-item.warning{
         background:#fff7ed;
         color:#9a3412;
         }
         .risk-item i{
         font-size:16px;
         }
         /* Responsive */
         @media (max-width: 900px){
         .risk-header{
         grid-template-columns:1fr;
         gap:12px;
         }
         .risk-details{
         margin-left:0;
         }
         }
         /* ===== PAYROLL AI INSIGHTS PANEL ===== */
         .payroll-ai-panel{
         background:#ffffff;
         border:1px solid #e2e8f0;
         border-radius:16px;
         padding:20px 24px;
         margin-top:24px;
         box-shadow:0 8px 18px rgba(15,23,42,.06);
         }
         /* Header */
         .ai-panel-header{
         display:flex;
         justify-content:space-between;
         align-items:center;
         margin-bottom:16px;
         }
         .ai-header-left{
         display:flex;
         align-items:center;
         gap:14px;
         }
         .ai-icon{
         width:42px;
         height:42px;
         border-radius:12px;
         background:#eef2ff;
         color:#4f46e5;
         display:flex;
         align-items:center;
         justify-content:center;
         font-size:20px;
         }
         .ai-title{
         font-size:15px;
         font-weight:800;
         color:#0f172a;
         }
         .ai-subtitle{
         font-size:12px;
         color:#64748b;
         margin-top:2px;
         }
         /* Badge */
         .ai-badge{
         background:#eef2ff;
         color:#4338ca;
         border:1px solid #c7d2fe;
         font-size:11px;
         font-weight:700;
         padding:6px 12px;
         border-radius:999px;
         letter-spacing:.03em;
         }
         /* Insights list */
         .ai-insights-list{
         list-style:none;
         padding:0;
         margin:0;
         display:flex;
         flex-direction:column;
         gap:10px;
         }
         .ai-insights-list li{
         display:flex;
         align-items:flex-start;
         gap:10px;
         font-size:13px;
         line-height:1.5;
         padding:12px 14px;
         border-radius:12px;
         background:#f8fafc;
         color:#0f172a;
         }
         /* Insight states */
         .ai-insights-list li.positive{
         background:#ecfdf5;
         color:#065f46;
         }
         .ai-insights-list li.warning{
         background:#fff7ed;
         color:#9a3412;
         }
         .ai-insights-list li i{
         font-size:16px;
         margin-top:2px;
         }
         /* Responsive */
         @media (max-width: 900px){
         .ai-panel-header{
         flex-direction:column;
         align-items:flex-start;
         gap:10px;
         }
         }
         /* ===== AI INSIGHTS BUTTON ===== */
         .btn-ai-insights{
         display:flex;
         align-items:center;
         gap:10px;
         background:linear-gradient(135deg, #eef2ff, #ffffff);
         color:#4338ca;
         border:1px solid #c7d2fe;
         padding:10px 18px;
         border-radius:999px;
         font-size:13px;
         font-weight:700;
         cursor:pointer;
         transition:all .2s ease;
         box-shadow:0 6px 14px rgba(79,70,229,.12);
         }
         /* Icon */
         .ai-icon-wrap{
         width:26px;
         height:26px;
         border-radius:50%;
         background:#e0e7ff;
         display:flex;
         align-items:center;
         justify-content:center;
         color:#4f46e5;
         font-size:14px;
         }
         /* Hover */
         .btn-ai-insights:hover{
         transform:translateY(-1px);
         box-shadow:0 10px 20px rgba(79,70,229,.18);
         background:linear-gradient(135deg, #e0e7ff, #ffffff);
         }
         /* Active */
         .btn-ai-insights:active{
         transform:translateY(0);
         box-shadow:0 4px 10px rgba(79,70,229,.15);
         }
         /* ===== PAYROLL HOURLY TABLE ===== */
         .payroll-table-container{
         background:#ffffff;
         border:1px solid #e2e8f0;
         border-radius:16px;
         overflow:hidden;
         box-shadow:0 10px 22px rgba(15,23,42,.06);
         margin-top:20px;
         }
         /* Table base */
         .hourly-data-table{
         width:100%;
         border-collapse:separate;
         border-spacing:0;
         font-size:13px;
         color:#0f172a;
         }
         /* Header */
         .hourly-data-table thead th{
         background:#f8fafc;
         text-transform:uppercase;
         font-size:11px;
         font-weight:800;
         letter-spacing:.04em;
         color:#475569;
         padding:14px 14px;
         text-align:center;
         border-bottom:1px solid #e2e8f0;
         }
         .hourly-data-table thead th:first-child{
         text-align:left;
         padding-left:20px;
         }
         /* Body cells */
         .hourly-data-table tbody td{
         padding:14px 14px;
         border-bottom:1px solid #eef2f7;
         text-align:center;
         white-space:nowrap;
         }
         /* Employee name */
         .hourly-data-table tbody td:first-child{
         text-align:left;
         font-weight:700;
         color:#0f172a;
         padding-left:20px;
         }
         /* Hrs | Pay formatting */
         .hourly-data-table tbody td:nth-child(2),
         .hourly-data-table tbody td:nth-child(3),
         .hourly-data-table tbody td:nth-child(4),
         .hourly-data-table tbody td:nth-child(5),
         .hourly-data-table tbody td:nth-child(6){
         font-variant-numeric:tabular-nums;
         }
         /* Tips */
         .hourly-data-table tbody td:nth-child(7),
         .hourly-data-table tbody td:nth-child(8),
         .hourly-data-table tbody td:nth-child(9){
         color:#334155;
         }
         /* Time Loss column â€” IMPORTANT */
         .hourly-data-table tbody td:nth-child(10){
         color:#2563eb;
         font-weight:700;
         }
         /* Action column */
         .hourly-data-table tbody td:last-child{
         text-align:center;
         }
         .hourly-data-table tbody td:last-child i{
         color:#2563eb;
         cursor:pointer;
         font-size:16px;
         }
         /* Row hover */
         .hourly-data-table tbody tr:hover{
         background:#f8fafc;
         }
         /* Last row */
         .hourly-data-table tbody tr:last-child td{
         border-bottom:none;
         }
         /* Responsive safety */
         @media (max-width: 1200px){
         .hourly-data-table{
         font-size:12px;
         }
         }
         /* ===== ANALYTICS GRAPH VIEW ===== */
         .analytics-view{
         background:#ffffff;
         border:1px solid #e2e8f0;
         border-radius:16px;
         margin:20px 24px;
         overflow:hidden;
         }
         /* Header */
         .analytics-view-header{
         display:flex;
         justify-content:space-between;
         align-items:flex-end;
         padding:16px 24px;
         border-bottom:1px solid #f1f5f9;
         background:#f8fafc;
         }
         .analytics-view-title{
         font-size:15px;
         font-weight:800;
         color:#0f172a;
         }
         .analytics-view-title span{
         display:block;
         font-size:12px;
         font-weight:500;
         color:#64748b;
         margin-top:2px;
         }
         /* Dropdown */
         .metric-dropdown{
         font-size:13px;
         padding:6px 12px;
         border-radius:8px;
         border:1px solid #e2e8f0;
         background:#ffffff;
         cursor:pointer;
         }
         /* Body */
         .analytics-view-body{
         padding:20px 24px;
         height:420px;
         background:#ffffff;
         }
         /* Graph viewport */
         .eye-graph-viewport{
         height:100%;
         background:#f8fafc;
         border-radius:12px;
         padding:16px;
         box-shadow:inset 0 0 0 1px #eef2f7;
         }
         .donut-wrapper {
         position: relative;
         width: 220px;
         height: 220px;
         margin: 20px auto;
         }
         .donut-svg {
         width: 100%;
         height: 100%;
         transform: rotate(-90deg); /* Start at the top */
         }
         /* Individual segment styling */
         .donut-segment {
         fill: none;
         stroke-width: 6;
         transition: stroke-width 0.3s, opacity 0.3s;
         cursor: pointer;
         }
         .donut-segment:hover {
         stroke-width: 8; /* Pop-out effect */
         opacity: 0.8;
         }
         .donut-tooltip {
         position: absolute;
         background: #0f172a;
         color: #fff;
         padding: 6px 10px;
         border-radius: 6px;
         font-size: 12px;
         font-weight: 600;
         pointer-events: none;
         white-space: nowrap;
         z-index: 100;
         box-shadow: 0 4px 12px rgba(0,0,0,0.15);
         }
         .donut-center {
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         text-align: center;
         pointer-events: none;
         }
         :root {
         --glass-bg: #ffffff;
         --text-main: #0f172a;
         --text-muted: #64748b;
         --chart-blue: #3b82f6;
         --chart-green: #10b981;
         --chart-orange: #f59e0b;
         --chart-red: #ef4444;
         --chart-purple: #8b5cf6;
         --chart-gray: #e2e8f0;
         }
         /* Premium Card Style */
         .premium-chart-card {
         background: var(--glass-bg);
         border: 1px solid #f1f5f9;
         border-radius: 16px;
         padding: 24px;
         box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02), 0 10px 15px -3px rgba(0, 0, 0, 0.03);
         transition: transform 0.2s ease, box-shadow 0.2s ease;
         }
         .premium-chart-card:hover {
         box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05);
         }
         .chart-header {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: 20px;
         }
         .chart-header h5 {
         font-size: 15px;
         font-weight: 700;
         color: var(--text-main);
         letter-spacing: -0.01em;
         }
         .chart-legend-badge {
         font-size: 11px;
         font-weight: 600;
         padding: 4px 10px;
         border-radius: 999px;
         background: #f8fafc;
         color: var(--text-muted);
         }
         /* Container Polish */
         .panel-header {
         padding: 1px 2px; /* Breathing room */
         background: linear-gradient(to bottom, #ffffff, #fcfdfe);
         display: flex;
         flex-direction: column;
         gap: 16px;
         }
         /* Title Polish */
         .panel-title {
         font-size: 20px;
         font-weight: 800; /* Bold, premium weight */
         color: #0f172a;
         display: flex;
         align-items: center;
         gap: 12px;
         letter-spacing: -0.02em;
         }
         .panel-title i {
         color: #2563eb; /* Vibrant brand blue */
         font-size: 22px;
         background: #eff6ff;
         padding: 8px;
         border-radius: 10px;
         }
         /* Elegant Separator */
         .header-separator {
         height: 1px;
         background: linear-gradient(to right, #e2e8f0, #f8fafc);
         width: 100%;
         }
         /* Professional Date Filter */
         .date-filter-main {
         display: inline-flex;
         align-items: center;
         gap: 10px;
         padding: 8px 16px;
         background: #ffffff; 
         border: 1px solid #e2e8f0;
         border-radius: 10px;
         font-size: 13px;
         font-weight: 700;
         color: #334155; 
         cursor: pointer;
         width: fit-content;
         box-shadow: 0 2px 4px rgba(0,0,0,0.02);
         transition: all 0.2s ease;
         }
         .date-filter-main:hover {
         border-color: #3b82f6;
         background: #f8faff;
         box-shadow: 0 4px 12px rgba(59, 130, 246, 0.08);
         }
         .date-filter-main i.bi-calendar3 {
         color: #3b82f6;
         font-size: 14px;
         }
         .date-filter-main i.bi-chevron-down {
         font-size: 10px;
         color: #94a3b8;
         }
         /* Container: Modern Ice-Blue Gradient */
         .detail-header-premium {
         background: linear-gradient(135deg, ##30b5c7 0%, #f0f1f2 100%);
         padding: 0px 2px;
         border-bottom: 1px solid #e2e8f0;
         box-shadow: 0 4px 12px rgba(15, 23, 42, 0.03);
         position: relative;
         }
         .header-top-row {
         display: flex;
         justify-content: space-between;
         align-items: center;
         width: 100%;
         }
         /* Typography: High Contrast & Depth */
         .panel-title-premium {
         font-size: 24px !important;
         font-weight: 800 !important; /* Premium 'Heavy' weight */
         color: #0f172a;
         letter-spacing: -0.04em;
         display: flex;
         align-items: center;
         }
         #activePeriod {
         font-weight: 700 !important;
         font-size: 13px !important;
         margin-left: 20px;
         color: #3b82f6; 
         background: rgba(59, 130, 246, 0.08); /* Transparent tint */
         padding: 6px 16px;
         border-radius: 999px; 
         border: 1px solid rgba(59, 130, 246, 0.1);
         text-transform: uppercase;
         letter-spacing: 0.03em;
         box-shadow: inset 0 1px 2px rgba(255,255,255,0.5);
         }
         /* Actions: Polished Buttons */
         .print-btn-premium {
         color: #94a3b8;
         font-size: 20px;
         cursor: pointer;
         transition: all 0.2s ease;
         padding: 10px;
         border-radius: 12px;
         background: transparent;
         }
         .print-btn-premium:hover {
         color: #3b82f6;
         background: #ffffff;
         box-shadow: 0 4px 6px rgba(0,0,0,0.05);
         }
         .btn-back-modern {
         display: flex;
         align-items: center;
         gap: 10px;
         padding: 7px 10px;
         background: #79787d; /* Dark Navy for high contrast */
         color: #ffffff;
         border: none;
         border-radius: 12px;
         font-size: 14px;
         font-weight: 700;
         cursor: pointer;
         transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
         box-shadow: 0 4px 10px rgba(30, 41, 59, 0.2);
         }
         .btn-back-modern:hover {
         background: #79787d;
         transform: translateX(-4px);
         box-shadow: 0 6px 15px rgba(30, 41, 59, 0.3);
         }
         .report-dropdown-wrapper {
         position: relative;
         display: inline-block;
         }
         /* Pill-shaped trigger button */
         .btn-report-trigger {
         display: flex;
         align-items: center;
         gap: 8px;
         padding: 6px 14px;
         background: #ffffff;
         border: 1px solid #cbd5e1;
         border-radius: 999px; /* Perfect pill shape */
         color: #3b82f6;
         cursor: pointer;
         transition: all 0.2s ease;
         }
         .btn-report-trigger:hover {
         background: #f8fafc;
         border-color: #3b82f6;
         }
         /* Floating Dropdown Menu */
         .report-menu {
         position: absolute;
         top: calc(100% + 8px);
         right: 0;
         width: 220px;
         background: #ffffff;
         border: 1px solid #e2e8f0;
         border-radius: 12px;
         box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
         z-index: 1100;
         overflow: hidden;
         animation: fadeInScale 0.2s ease-out;
         }
         .report-item {
         display: flex;
         align-items: center;
         gap: 12px;
         padding: 12px 16px;
         font-size: 14px;
         font-weight: 600;
         color: #1e293b;
         cursor: pointer;
         border-bottom: 1px solid #f1f5f9;
         }
         .report-item:last-child {
         border-bottom: none;
         }
         .report-item i {
         color: #6366f1; /* Indigo color from screenshot */
         font-size: 16px;
         }
         .report-item:hover {
         background: #f8fafc;
         color: #3b82f6;
         }
         @keyframes fadeInScale {
         from { opacity: 0; transform: scale(0.95) translateY(-10px); }
         to { opacity: 1; transform: scale(1) translateY(0); }
         }
         .kpi-divider {
         height: 1px;
         background-color: #d6dade; /* Subtle light gray to match premium theme */
         width: 100%;
         margin: 16px 0; /* Provides balanced spacing above and below */
         }
         .main-kpi-value {
         display: block;
         font-size: 28px;
         font-weight: 800;
         color: #0f172a;
         letter-spacing: -0.02em;
         }
         /* Container: Centered & Spacious */
         .stepper-track {
         display: flex;
         align-items: center;
         justify-content: space-between;
         width: 100%;
         padding: 10px 0;
         }
         /* Individual Step: Modern Card Style */
         .step-item {
         position: relative;
         display: flex;
         align-items: center;
         gap: 12px;
         padding: 12px 24px;
         background: #ffffff;
         border: 1px solid #e2e8f0;
         border-radius: 14px; /* Matches your rounded KPI cards */
         color: #64748b;
         font-size: 14px;
         font-weight: 700;
         cursor: pointer;
         transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
         box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
         }
         /* Active State: Vibrant Glow */
         .step-item.active {
         background: #eff6ff;
         border-color: #3b82f6;
         color: #2563eb;
         box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.15);
         transform: translateY(-2px);
         }
         /* Connector Line: Sleek & Minimal */
         .connector-line {
         flex: 1;
         height: 2px;
         background: #e2e8f0;
         margin: 0 16px;
         border-radius: 2px;
         }
         /* Badge: Floating Action Style */
         .badge-ui {
         display: inline-flex;
         align-items: center;
         justify-content: center;
         min-width: 22px;
         height: 22px;
         padding: 0 6px;
         border-radius: 8px;
         font-size: 11px;
         font-weight: 800;
         }
         .badge-ui.count {
         background: #6366f1; /* Indigo from your report menu */
         color: #ffffff;
         }
         .badge-ui.alert {
         background: #ef4444; /* Vivid Red */
         color: #ffffff;
         animation: pulseAlert 2s infinite;
         }
         @keyframes pulseAlert {
         0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
         70% { transform: scale(1.1); box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); }
         100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
         }
         .step-item:hover:not(.active) {
         border-color: #cbd5e1;
         background: #f8fafc;
         color: #1e293b;
         }
         /* --- Premium KPI Section (Compact Vertical Version) --- */
         .kpi-container {
         display: grid; 
         grid-template-columns: repeat(4, 1fr); 
         gap: 16px; 
         padding: 16px 24px; /* Reduced vertical padding */
         background: #f8fafc;
         }
         .kpi-card {
         background: #ffffff;
         border-radius: 12px; /* Slightly tighter radius for smaller card */
         padding: 14px 18px; /* Compact padding */
         border: 1px solid #e2e8f0;
         box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
         transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
         position: relative;
         overflow: hidden;
         /* Added top border for clear visual distinction */
         border-top-width: 4px; 
         }
         .kpi-card:hover {
         transform: translateY(-3px);
         box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.08);
         }
         /* Header & Icon Badge */
         .kpi-header {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: 6px; /* Tightened gap */
         }
         .kpi-header span {
         font-size: 10px; /* Smaller label */
         font-weight: 700;
         text-transform: uppercase;
         letter-spacing: 0.05em;
         color: #64748b;
         }
         .kpi-icon-badge {
         width: 28px; /* Slightly smaller badge */
         height: 28px;
         border-radius: 8px;
         display: flex;
         align-items: center;
         justify-content: center;
         font-size: 14px;
         cursor: pointer;
         transition: transform 0.2s;
         }
         .kpi-icon-badge:hover {
         transform: scale(1.1);
         }
         /* Accent Colors */
         .border-blue   { border-top-color: #3b82f6; }
         .border-green  { border-top-color: #10b981; }
         .border-orange { border-top-color: #f59e0b; }
         .border-purple { border-top-color: #8b5cf6; }
         .icon-bg-blue   { background: #eff6ff; color: #3b82f6; }
         .icon-bg-green  { background: #ecfdf5; color: #10b981; }
         .icon-bg-orange { background: #fffbeb; color: #f59e0b; }
         .icon-bg-purple { background: #faf5ff; color: #8b5cf6; }
         /* Main Value Typography */
         .main-kpi-value {
         display: block;
         font-size: 24px; /* Reduced from 28px for vertical space */
         font-weight: 800;
         color: #0f172a;
         letter-spacing: -0.02em;
         margin-bottom: 8px; /* Reduced from 16px */
         }
         /* Footer Metrics */
         .kpi-divider {
         height: 1px;
         background: linear-gradient(to right, #e2e8f0, transparent);
         margin-bottom: 10px; /* Reduced gap */
         width: 100%;
         }
         .kpi-footer {
         display: flex;
         align-items: center;
         }
         .footer-item {
         flex: 1;
         display: flex;
         flex-direction: column;
         }
         .footer-label {
         font-size: 9px;
         font-weight: 700;
         color: #94a3b8;
         text-transform: uppercase;
         margin-bottom: 1px;
         }
         .footer-value {
         font-size: 12px; /* Smaller compact font */
         font-weight: 700;
         color: #334155;
         }
         .v-sep {
         width: 1px;
         height: 20px; /* Shorter vertical separator */
         background-color: #e2e8f0;
         margin: 0 12px;
         }
         /* Graph Icon Support */
         .graph-icon-svg {
         width: 16px;
         height: 16px;
         fill: currentColor;
         }
         /* 1. Remove the left line pseudo-element from all KPI cards */
         .fix-kpi-card::before, 
         .kpi-card::before {
         display: none !important;
         }
         /* 2. Enable the top border for all KPI cards */
         .fix-kpi-card, 
         .kpi-card {
         border-top: 4px solid transparent !important;
         position: relative;
         }
         /* 3. Re-map the accent classes to the top border */
         .accent-blue, .border-blue     { border-top-color: #3b82f6 !important; }
         .accent-green, .border-green   { border-top-color: #22c55e !important; }
         .accent-orange, .border-orange { border-top-color: #f59e0b !important; }
         .accent-red, .border-red       { border-top-color: #ef4444 !important; }
         .accent-purple, .border-purple { border-top-color: #8b5cf6 !important; }

         .labor-card{
  background:#ffffff;
  border-radius:16px;
  padding:18px;
  border:1px solid #e2e8f0;
  box-shadow:0 6px 14px rgba(15,23,42,0.06);
  transition:all .25s ease;
}

.labor-card:hover{
  transform:translateY(-4px);
  box-shadow:0 18px 34px rgba(15,23,42,0.14);
}

.labor-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.labor-title{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:13px;
  font-weight:700;
  color:#334155;
}

.labor-title i{
  color:#60a5fa;
  font-size:14px;
}

.labor-icon{
  width:36px;
  height:36px;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
}

.icon-blue{ background:#eef2ff; color:#2563eb; }
.icon-orange{ background:#fff7ed; color:#ea580c; }
.icon-red{ background:#fef2f2; color:#dc2626; }
.icon-purple{ background:#faf5ff; color:#7c3aed; }

.labor-value{
  font-size:22px;
  font-weight:900;
  margin-top:6px;
  color:#0f172a;
}

.labor-trend{
  margin-top:6px;
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:5px 12px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
}

.labor-trend.up{
  background:#ecfdf5;
  color:#16a34a;
}

.labor-trend.down{
  background:#fef2f2;
  color:#dc2626;
}

.labor-footer{
  margin-top:14px;
  padding:12px 14px;
  background:#f8fafc;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.labor-footer-col{
  display:flex;
  flex-direction:column;
  gap:2px;
}

.labor-footer-col span{
  font-size:10px;
  font-weight:700;
  color:#64748b;
  letter-spacing:.06em;
}

.labor-footer-col b{
  font-size:14px;
  font-weight:800;
}

.labor-footer-col.right{
  text-align:right;
}

.labor-footer-separator{
  width:1px;
  height:32px;
  background:#e2e8f0;
}

.positive{ color:#16a34a; }
.negative{ color:#dc2626; }


      </style>
   </head>
   <body>
      <header>
         <div class="header-left">
            <img src="https://agcdn.altametrics.com/hw_prod_others/common/images/app_icon/zipclock.svg" class="app-logo">
            <div class="nav-link"><i class="bi bi-grid-3x3-gap-fill"></i> My App <i class="bi bi-caret-down-fill" style="font-size: 8px;"></i></div>
            <div class="nav-link"><i class="bi bi-house-door"></i> Dashboard</div>
            <div class="nav-link"><i class="bi bi-clock-history"></i> Site Clock</div>
            <div class="nav-link"><i class="bi bi-geo-alt"></i> 99999 <i class="bi bi-caret-down-fill" style="font-size: 8px;"></i></div>
         </div>
         <div class="header-center">
            <div class="weather"><i class="bi bi-cloud-snow"></i><span>-6Â°C</span></div>
            <div class="v-divider"></div>
            <div class="time-box"><b>10:25</b><sup>A</sup><span>America/Toronto</span></div>
         </div>
         <div class="header-right">
            <div class="store-tag"><i class="bi bi-shop"></i> 99999</div>
            <i class="bi bi-moon" style="margin-left: 10px;"></i>
            <i class="bi bi-gear" style="margin-left: 10px;"></i>
            <i class="bi bi-person-circle" style="margin-left: 10px;"></i>
         </div>
      </header>
      <aside class="sidebar">
         <ul class="menu-list">
            <li><a href="index.html" class="menu-item"><i class="bi bi-house-door"></i><span class="menu-label">Dashboard</span></a></li>
            <li><a href="#" class="menu-item"><i class="bi bi-clock"></i><span class="menu-label">Site Clock</span></a></li>
            <li><a href="#" class="menu-item"><i class="bi bi-people"></i><span class="menu-label">Employees</span></a></li>
            <li><a href="#" class="menu-item"><i class="bi bi-calendar-check"></i><span class="menu-label">Punch Management</span></a></li>
            <li><a href="#" class="menu-item active"><i class="bi bi-wallet2"></i><span class="menu-label">Payroll Management</span></a></li>
            <li><a href="#" class="menu-item"><i class="bi bi-graph-down-arrow"></i><span class="menu-label">Time Loss Summary</span></a></li>
            <li><a href="#" class="menu-item"><i class="bi bi-file-earmark-bar-graph"></i><span class="menu-label">Reports</span></a></li>
            <li><a href="#" class="menu-item"><i class="bi bi-clock"></i><span class="menu-label">Time Clock Devices</span></a></li>
         </ul>
         <div class="sidebar-footer">
            <div class="settings-circle"><i class="bi bi-gear"></i></div>
            <div class="help-main">Help</div>
         </div>
      </aside>
      <main class="main-content">
         <div id="landingScreen" class="payroll-panel">
            <div class="panel-header">
               <div class="panel-title">
                  <i class="bi bi-wallet2"></i> 
                  Payroll Management
               </div>
               <div class="header-separator"></div>
               <div class="date-filter-main">
                  <i class="bi bi-calendar3"></i>
                  <span>12/30/2025 - 02/02/2026</span>
                  <i class="bi bi-chevron-down"></i>
               </div>
            </div>
            <div class="payroll-table-container">
               <table>
                  <thead>
                     <tr>
                        <th>Payroll Period <i class="bi bi-arrow-down-up"></i></th>
                        <th>Reg. Hrs. <i class="bi bi-arrow-down-up"></i></th>
                        <th>OT Hrs <i class="bi bi-arrow-down-up"></i></th>
                        <th>DT Hrs <i class="bi bi-arrow-down-up"></i></th>
                        <th>Extra Pay($) <i class="bi bi-arrow-down-up"></i></th>
                        <th>Total Pay($) <i class="bi bi-arrow-down-up"></i></th>
                        <th>Status <i class="bi bi-arrow-down-up"></i></th>
                        <th>Integration Status <i class="bi bi-arrow-down-up"></i></th>
                        <th style="text-align: center;">Action(s)</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td>01/27/2026 - 02/02/2026</td>
                        <td>391.82</td>
                        <td>12.50</td>
                        <td>2.00</td>
                        <td><span class="val-currency">$</span>150.00</td>
                        <td><span class="val-currency">$</span>7,987.74</td>
                        <td><span class="status-pill status-unfinalized">Unfinalized</span></td>
                        <td><span class="status-pill status-notsent">Not Processed</span></td>
                        <td style="text-align: center;"><i class="bi bi-pencil-square action-icon" onclick="showDetailView('01/27/2026 - 02/02/2026')"></i></td>
                     </tr>
                     <tr>
                        <td>01/13/2026 - 01/26/2026</td>
                        <td>784.15</td>
                        <td>24.75</td>
                        <td>0.00</td>
                        <td><span class="val-currency">$</span>0.00</td>
                        <td><span class="val-currency">$</span>14,210.30</td>
                        <td><span class="status-pill status-finalized" style="background: var(--status-green-bg); color: var(--status-green-text);">Finalized</span></td>
                        <td><span class="status-pill status-notsent">Not Processed</span></td>
                        <td style="text-align: center;"><i class="bi bi-pencil-square action-icon" onclick="showDetailView('01/13/2026 - 01/26/2026')"></i></td>
                     </tr>
                     <tr>
                        <td>12/30/2025 - 01/12/2026</td>
                        <td>762.40</td>
                        <td>18.20</td>
                        <td>4.50</td>
                        <td><span class="val-currency">$</span>225.00</td>
                        <td><span class="val-currency">$</span>13,850.15</td>
                        <td><span class="status-pill status-finalized" style="background: var(--status-green-bg); color: var(--status-green-text);">Finalized</span></td>
                        <td><span class="status-pill status-sent" style="background: var(--status-green-bg); color: var(--status-green-text);">Processed</span></td>
                        <td style="text-align: center;"><i class="bi bi-pencil-square action-icon" onclick="showDetailView('12/30/2025 - 01/12/2026')"></i></td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <div id="detailScreen" class="payroll-panel hidden">
            <div class="panel-header detail-header-premium">
               <div class="header-top-row">
                  <div class="panel-title panel-title-premium">
                     Payroll <span id="activePeriod">01/27/2026 - 02/02/2026</span>
                  </div>
                  <div style="display: flex; align-items: center; gap: 20px;">
                     <div class="report-dropdown-wrapper">
                        <button class="btn-report-trigger" onclick="toggleReportMenu(event)">
                        <i class="bi bi-printer"></i>
                        <i class="bi bi-caret-down-fill" style="font-size: 8px;"></i>
                        </button>
                        <div id="reportMenu" class="report-menu hidden">
                           <div class="report-item">
                              <i class="bi bi-wallet2"></i> <span>Payroll Report</span>
                           </div>
                           <div class="report-item">
                              <i class="bi bi-cash-stack"></i> <span>Extra Pay Report</span>
                           </div>
                           <div class="report-item">
                              <i class="bi bi-calendar2-x"></i> <span>Time Off Report</span>
                           </div>
                           <div class="report-item">
                              <i class="bi bi-shield-check"></i> <span>Audit Trail Report</span>
                           </div>
                        </div>
                     </div>
                     <button class="btn-back-modern" onclick="showLandingView()">
                     <i class="bi bi-arrow-left" style="font-size: 18px;"></i> 
                     Back
                     </button>
                  </div>
               </div>
            </div>

            <br> 
            <div class="stepper-full-container">
               <div class="nav-btn-box dark" onclick="moveStepper('prev')"><i class="bi bi-caret-left-fill"></i></div>
               <div class="stepper-track">
                  <div class="step-item" onclick="setActiveStep(this, 'fix')">
                     <span>Fix Issues</span>
                     <span class="badge-ui count">4</span>
                  </div>
                  <div class="connector-line"></div>
                  <div class="step-item" onclick="setActiveStep(this, 'extra')">
                     <span>Extra Pay</span>
                     <span class="badge-ui count">1</span>
                  </div>
                  <div class="connector-line"></div>
                  <div class="step-item active" onclick="setActiveStep(this, 'hourly')">
                     <span>Review Hourly Punches</span>
                     <span class="badge-ui count">4</span>
                  </div>
                  <div class="connector-line"></div>
                  <div class="step-item" onclick="setActiveStep(this, 'submit')">
                     <span>Submit Payroll</span>
                     <span class="badge-ui alert">!</span>
                  </div>
               </div>
               <div class="nav-btn-box dark" onclick="moveStepper('next')"><i class="bi bi-caret-right-fill"></i></div>
            </div>
            <!-- Submit Payroll-->
            <!-- ================= SUBMIT PAYROLL VIEW ================= -->
            <div id="submitPayrollView" class="tab-view hidden">
               <br>
               <!-- ===== PAY SUMMARY STRIP (FROM SCREENSHOT) ===== -->
               <div class="pay-summary-row">
                  <div class="pay-tile">
                     <b id="regPay">$0.00</b>
                     <span>Regular Pay</span>
                  </div>
                  <div class="math-icon">+</div>
                  <div class="pay-tile">
                     <b id="otPay">$0.00</b>
                     <span>OT Pay</span>
                  </div>
                  <div class="math-icon">+</div>
                  <div class="pay-tile">
                     <b id="dtPay">$0.00</b>
                     <span>DT Pay</span>
                  </div>
                  <div class="math-icon">+</div>
                  <div class="pay-tile">
                     <b id="extraPay">$0.00</b>
                     <span>Extra Pay</span>
                  </div>
                  <div class="math-icon equals">=</div>
                  <div class="pay-tile total">
                     <b id="totalPay">$0.00</b>
                     <span>Payroll Amount</span>
                  </div>
               </div>
               <!-- ===== EMPLOYEE + FINALIZE BAR ===== -->
               <div class="submit-action-panel">
                  <div class="employee-info">
                     <i class="bi bi-people-fill"></i>
                     <div>
                        <b>9</b>
                        <span>No. of Employee(s)</span>
                     </div>
                  </div>
                  <div class="payroll-message">
                     Total payroll amount is
                     <b>89.18%</b> less or equal last payroll period
                  </div>
                  <div class="action-buttons">
                     <button class="btn-ai-insights" onclick="togglePayrollInsights()">
                     <span class="ai-icon-wrap">
                     <i class="bi bi-stars"></i>
                     </span>
                     <span class="ai-text">AI Insights</span>
                     </button>
                     <button class="btn-finalize">
                     Finalize
                     </button>
                  </div>
               </div>
               <!-- ===== INSIGHTS SECTION (HIDDEN INITIALLY) ===== -->
               <div id="payrollInsights" class="payroll-insights hidden">
                  <!-- ===== INSIGHTS SECTION HEADER ===== -->
                  <!-- ===== INSIGHTS HEADER ===== -->
                  <div class="insights-header">
                     <span class="insights-header-text">
                     <i class="bi bi-bar-chart-line"></i>
                     Insights
                     </span>
                  </div>
                  <!-- AI INSIGHTS -->
                  <!-- ===== PAYROLL AI INSIGHTS CARD ===== -->
                  <!-- ===== PAYROLL AI INSIGHTS ===== -->
                  <div class="payroll-ai-panel">
                     <div class="ai-panel-header">
                        <div class="ai-header-left">
                           <div class="ai-icon">
                              <i class="bi bi-stars"></i>
                           </div>
                           <div>
                              <div class="ai-title">Payroll AI Insights</div>
                              <div class="ai-subtitle">Automated analysis based on current payroll data</div>
                           </div>
                        </div>
                        <div class="ai-badge">AI Generated</div>
                     </div>
                     <ul class="ai-insights-list" id="aiInsightsList">
                        <!-- Dynamic insights will be injected here -->
                     </ul>
                  </div>
                  <!-- KPI GRID -->
                  <div class="insight-metric-row">
                     <!-- Total Hours -->
                     <div class="metric-card">
                        <span class="metric-label">Total Hours</span>
                        <b id="insTotalHours">391.82</b>
                     </div>
                     <!-- Avg Pay -->
                     <div class="metric-card">
                        <span class="metric-label">Avg Pay / Employee</span>
                        <b id="insAvgPay">$96.03</b>
                     </div>
                     <!-- OT % -->
                     <div class="metric-card highlight-blue">
                        <span class="metric-label">OT %</span>
                        <b id="insOTPercent">0%</b>
                        <small id="insOTNote">No overtime recorded</small>
                     </div>
                     <!-- Risk Flags -->
                     <div class="metric-card highlight-red">
                        <div class="metric-label-row">
                           <span class="metric-label">Risk Flags</span>
                           <i class="bi bi-info-circle-fill info-icon"
                              onmouseenter="showRiskTooltip(event)"
                              onmouseleave="hideRiskTooltip()"></i>
                        </div>
                        <b id="insRiskCount">0</b>
                        <small id="insRiskLabel">No risks detected</small>
                        <!-- Tooltip -->
                        <div id="riskTooltip" class="risk-tooltip hidden">
                           <b>Risk Flags Explained</b>
                           <ul id="riskTooltipList"></ul>
                        </div>
                     </div>
                  </div>
                  <!-- CHART PLACEHOLDERS -->
                  <!-- ===== INSIGHTS CHARTS ===== -->
                  <div class="insights-charts" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; padding: 24px;">
                     <div class="premium-chart-card">
                        <div class="chart-header">
                           <h5>Payroll Breakdown</h5>
                           <div class="chart-legend-badge">Current Period</div>
                        </div>
                        <div class="bar-chart" id="payrollBarChart" style="height: 220px; align-items: flex-end; padding-bottom: 20px;">
                        </div>
                     </div>
                     <div class="premium-chart-card">
                        <div class="chart-header">
                           <h5>Payroll Distribution</h5>
                           <div class="chart-legend-badge">By Employee</div>
                        </div>
                        <div class="donut-wrapper" style="width: 200px; height: 200px; margin: 0 auto;">
                           <svg id="payrollSvg" viewBox="0 0 40 40" class="donut-svg"></svg>
                           <div class="donut-center">
                              <b id="donutCenterValue" style="font-size: 18px; color: var(--text-main);">$0.00</b>
                              <span id="donutCenterLabel" style="font-size: 11px; color: var(--text-muted);">Total</span>
                           </div>
                           <div id="donutTooltip" class="donut-tooltip hidden"></div>
                        </div>
                     </div>
                     <div class="premium-chart-card">
                        <div class="chart-header">
                           <h5>Payroll vs Last Period</h5>
                           <div style="display: flex; gap: 8px;">
                              <span class="chart-legend-badge" style="background: #eff6ff; color: #3b82f6;">â— Current</span>
                              <span class="chart-legend-badge" style="background: #f1f5f9; color: #94a3b8;">â— Previous</span>
                           </div>
                        </div>
                        <div class="compare-bar-chart" style="height: 220px;">
                        </div>
                     </div>
                     <div class="premium-chart-card" style="display: flex; flex-direction: column; justify-content: space-between;">
                        <div>
                           <div class="chart-header">
                              <h5>Cost per Employee</h5>
                              <i class="bi bi-info-circle" style="color: var(--text-muted); cursor: pointer;"></i>
                           </div>
                           <div class="efficiency-chart" style="height: 180px;">
                           </div>
                        </div>
                        <div class="efficiency-insight success" style="margin-top: 15px; border-radius: 12px; font-weight: 600;">
                           <i class="bi bi-lightning-charge-fill"></i>
                           Efficiency improved by <b>13%</b>
                        </div>
                     </div>
                  </div>
                  <!-- ===== PAYROLL RISK SUMMARY ===== -->
                  <div class="payroll-risk-panel">
                     <div class="risk-header">
                        <div class="risk-icon">
                           <i class="bi bi-shield-check"></i>
                        </div>
                        <div class="risk-title-group">
                           <div class="risk-title">Payroll Risk Summary</div>
                           <div class="risk-subtitle">
                              Overall payroll is <b>within acceptable limits</b>
                           </div>
                        </div>
                        <div class="risk-badge">
                           2 Review Flags
                        </div>
                     </div>
                     <div class="risk-details">
                        <div class="risk-item warning">
                           <i class="bi bi-exclamation-triangle-fill"></i>
                           OT contribution exceeds threshold for <b>1 employee</b>
                        </div>
                        <div class="risk-item warning">
                           <i class="bi bi-exclamation-triangle-fill"></i>
                           Cost per hour spike detected for <b>Andrew R</b>
                        </div>
                     </div>
                  </div>
                  <div class="insight-metric-row">
                     <div class="metric-card highlight-blue">
                        <div class="metric-label">Top Cost Driver</div>
                        <b>Sarah M</b>
                        <small>22% of total payroll</small>
                     </div>
                     <div class="metric-card highlight-red">
                        <div class="metric-label">Highest OT %</div>
                        <b>18%</b>
                        <small>Threshold: 12%</small>
                     </div>
                     <div class="metric-card">
                        <div class="metric-label">Highest Cost / Hr</div>
                        <b>$41.20</b>
                        <small>Andrew R</small>
                     </div>
                     <div class="metric-card">
                        <div class="metric-label">Most Efficient</div>
                        <b>Emily T</b>
                        <small>$29.10 / hr</small>
                     </div>
                  </div>
                  <!-- ===== AI INSIGHTS GRID ===== -->
                  <div class="ai-insights-grid">
                     <!-- Payroll Benchmark Comparison -->
                     <div class="ai-insights-card">
                        <div class="ai-insights-header">
                           <div class="ai-title">
                              <i class="bi bi-bar-chart-line"></i>
                              Payroll Benchmark Comparison
                           </div>
                        </div>
                        <ul class="ai-insights-list">
                           <li class="positive">
                              <i class="bi bi-check-circle-fill"></i>
                              Total payroll is <b>8% below</b> last period average.
                           </li>
                           <li>
                              <i class="bi bi-exclamation-circle"></i>
                              OT cost is <b>4% higher</b> than store benchmark.
                           </li>
                           <li class="positive">
                              <i class="bi bi-check-circle-fill"></i>
                              Cost per employee is within <b>normal range</b>.
                           </li>
                        </ul>
                     </div>
                     <!-- Payroll Exceptions -->
                     <div class="ai-insights-card">
                        <div class="ai-insights-header">
                           <div class="ai-title">
                              <i class="bi bi-exclamation-diamond"></i>
                              Payroll Exceptions
                           </div>
                        </div>
                        <ul class="ai-insights-list">
                           <li>
                              <i class="bi bi-exclamation-triangle-fill"></i>
                              <b>Sarah M</b> logged <b>9.5 OT hours</b> in last 2 days
                           </li>
                           <li>
                              <i class="bi bi-exclamation-triangle-fill"></i>
                              <b>Andrew R</b> cost per hour exceeds team average by <b>18%</b>
                           </li>
                           <li class="positive">
                              <i class="bi bi-check-circle-fill"></i>
                              No missing punches detected
                           </li>
                        </ul>
                     </div>
                     <!-- Hidden Cost Signals -->
                     <div class="ai-insights-card">
                        <div class="ai-insights-header">
                           <div class="ai-title">
                              <i class="bi bi-lightbulb"></i>
                              Hidden Cost Signals
                           </div>
                        </div>
                        <ul class="ai-insights-list">
                           <li>
                              <i class="bi bi-info-circle"></i>
                              High-cost employees worked mostly <b>low-volume shifts</b>
                           </li>
                           <li>
                              <i class="bi bi-info-circle"></i>
                              OT clustered on <b>Friday evenings</b>
                           </li>
                           <li class="positive">
                              <i class="bi bi-check-circle-fill"></i>
                              No excessive DT patterns detected
                           </li>
                        </ul>
                     </div>
                     <!-- Payroll Confidence Meter -->
                     <div class="ai-insights-card">
                        <div class="ai-insights-header">
                           <div class="ai-title">
                              <i class="bi bi-speedometer2"></i>
                              Payroll Confidence Meter
                           </div>
                        </div>
                        <ul class="ai-insights-list">
                           <li class="positive">
                              <i class="bi bi-check-circle-fill"></i>
                              Data completeness: <b>100%</b>
                           </li>
                           <li class="positive">
                              <i class="bi bi-check-circle-fill"></i>
                              Risk exposure: <b>Low</b>
                           </li>
                           <li>
                              <i class="bi bi-exclamation-circle"></i>
                              Recommendation: <b>Finalize with note</b>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="insights-table">
                     <table class="formal-table">
                        <thead>
                           <tr>
                              <th>Employee</th>
                              <th>Total Hrs</th>
                              <th>OT %</th>
                              <th>Cost / Hr</th>
                              <th>Payroll Impact</th>
                              <th>Risk Signal</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td><b>Andrew K</b></td>
                              <td>42.5</td>
                              <td>4%</td>
                              <td>$33.40</td>
                              <td>18%</td>
                              <td>
                                 <span class="status-pill status-finalized">Normal</span>
                              </td>
                           </tr>
                           <tr>
                              <td><b>Sarah M</b></td>
                              <td>51.0</td>
                              <td>18%</td>
                              <td>$38.90</td>
                              <td>22%</td>
                              <td>
                                 <span class="status-pill status-notsent">High OT</span>
                              </td>
                           </tr>
                           <tr>
                              <td><b>Andrew R</b></td>
                              <td>28.5</td>
                              <td>0%</td>
                              <td>$41.20</td>
                              <td>11%</td>
                              <td>
                                 <span class="status-pill status-notsent">High Rate</span>
                              </td>
                           </tr>
                           <tr>
                              <td><b>Emily T</b></td>
                              <td>36.0</td>
                              <td>2%</td>
                              <td>$29.10</td>
                              <td>9%</td>
                              <td>
                                 <span class="status-pill status-finalized">Efficient</span>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- ===== FINAL APPROVAL SUMMARY ===== -->
                  <div class="final-approval-panel">
                     <!-- Left: Approval Context -->
                     <div class="approval-left">
                        <div class="approval-icon">
                           <i class="bi bi-shield-check"></i>
                        </div>
                        <div class="approval-details">
                           <div class="approval-title">Approval Summary</div>
                           <div class="approval-meta">
                              Reviewed by <b>Tushar</b> Â· <span>Feb 2, 10:48 AM</span>
                           </div>
                        </div>
                     </div>
                     <!-- Center: Amount -->
                     <div class="approval-amount">
                        <span>Total Approved Payroll</span>
                        <b>$7,987.74</b>
                     </div>
                     <!-- Right: Action -->
                     <div class="approval-actions">
                        <button class="btn-note">
                        <i class="bi bi-chat-left-text"></i>
                        Add Note
                        </button>
                     </div>
                  </div>
               </div>
            </div>

            <br>

            <!--- Hourly Review Punches-->
            <div id="hourlyView" class="tab-view">
<div class="fix-kpi-grid">

  <!-- REGULAR HRS | PAY -->
  <div class="labor-card" onclick="openHourlyPunchModal('regular')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Regular Hrs | Pay ($)
      </div>

      <div class="labor-icon icon-green">
        <i class="bi bi-clock"></i>
      </div>
    </div>

    <div class="labor-value" id="kpiRegularHrsPay">
      0.00 | $0.00
    </div>

    <div class="labor-trend up">
      <i class="bi bi-arrow-up"></i>
      +6.5% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>EXPECTED</span>
        <b>0.00 | $0.00</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>VARIANCE</span>
        <b class="positive">+$0.00</b>
      </div>
    </div>
  </div>

  <!-- TOTAL HRS | PAY -->
  <div class="labor-card" onclick="openHourlyPunchModal('total')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Total Hrs | Pay ($)
      </div>

      <div class="labor-icon icon-blue">
        <i class="bi bi-hourglass-split"></i>
      </div>
    </div>

    <div class="labor-value" id="kpiTotalHrsPay">
      0.00 | $0.00
    </div>

    <div class="labor-trend up">
      <i class="bi bi-arrow-up"></i>
      +4.2% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>SCHEDULED</span>
        <b>0.00 | $0.00</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>OVERRUN</span>
        <b class="negative">+$0.00</b>
      </div>
    </div>
  </div>

  <!-- TIME LOSS HRS | PAY -->
  <div class="labor-card" onclick="openHourlyPunchModal('loss')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Time Loss Hrs | Pay ($)
      </div>

      <div class="labor-icon icon-orange">
        <i class="bi bi-exclamation-triangle"></i>
      </div>
    </div>

    <div class="labor-value" id="kpiLossHrsPay">
      0.00 | $0.00
    </div>

    <div class="labor-trend up">
      <i class="bi bi-arrow-up"></i>
      +9.1% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>BASELINE</span>
        <b>0.00 | $0.00</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>IMPACT</span>
        <b class="negative">+$0.00</b>
      </div>
    </div>
  </div>

  <!-- HIGHEST TIME LOSS -->
  <div class="labor-card" onclick="openHourlyPunchModal('highest')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Highest Time Loss
      </div>

      <div class="labor-icon icon-purple">
        <i class="bi bi-graph-up"></i>
      </div>
    </div>

    <div class="labor-value" id="kpiHighestLossEmp">
      â€”
    </div>

    <div class="labor-trend down">
      <i class="bi bi-arrow-down"></i>
      âˆ’2.3% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>HRS | PAY</span>
        <b id="kpiHighestLossVal">0.00 | $0.00</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>SHARE</span>
        <b class="negative">â€”</b>
      </div>
    </div>
  </div>

</div>

               <div class="search-bar-container">
                  <div class="search-wrapper">
                     <input type="text" placeholder="Search Employees...">
                     <i class="bi bi-search"></i>
                  </div>
               </div>
               <div class="payroll-table-container">
                  <table class="hourly-data-table">
                     <thead>
                        <tr>
                           <th>Employees</th>
                           <th>Regular Hrs | Pay ($)</th>
                           <th>OT Hrs | Pay ($)</th>
                           <th>DT Hrs | Pay ($)</th>
                           <th>Extra Hrs | Pay ($)</th>
                           <th>Total Hrs | Pay ($)</th>
                           <th>Credit Tip ($)</th>
                           <th>Cash Tip ($)</th>
                           <th>Total Tip ($)</th>
                           <th>Time Loss Hrs | Pay ($)</th>
                           <th>Action(s)</th>
                        </tr>
                     </thead>
                     <tbody id="hourlyTableBody"></tbody>
                  </table>
               </div>
            </div>

            <br>
            <!-- Fix Issues Tab -->
            <!-- FIX ISSUES VIEW -->
            <div id="fixIssuesView" class="tab-view hidden">
               <!-- KPI STRIP -->
               <!-- KPI TILES -->
<div class="fix-kpi-grid">

  <!-- OPEN PUNCHES -->
  <div class="labor-card" onclick="openIssueModal('open')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Open Punches
      </div>

      <div class="labor-icon icon-blue">
        <i class="bi bi-clock-history"></i>
      </div>
    </div>

    <div class="labor-value">1</div>

    <div class="labor-trend up">
      <i class="bi bi-arrow-up"></i>
      +12.0% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>PENDING</span>
        <b>1</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>CHANGE</span>
        <b class="positive">+1</b>
      </div>
    </div>
  </div>

  <!-- MISMATCHED PUNCHES -->
  <div class="labor-card" onclick="openIssueModal('mismatch')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Mismatched Punches
      </div>

      <div class="labor-icon icon-orange">
        <i class="bi bi-exclamation-triangle"></i>
      </div>
    </div>

    <div class="labor-value">1</div>

    <div class="labor-trend down">
      <i class="bi bi-arrow-down"></i>
      âˆ’4.0% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>EXPECTED</span>
        <b>2</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>DELTA</span>
        <b class="negative">âˆ’1</b>
      </div>
    </div>
  </div>

  <!-- UNAUTHORIZED PUNCHES -->
  <div class="labor-card" onclick="openIssueModal('unauthorized')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Unauthorized Punches
      </div>

      <div class="labor-icon icon-red">
        <i class="bi bi-shield-x"></i>
      </div>
    </div>

    <div class="labor-value">1</div>

    <div class="labor-trend up">
      <i class="bi bi-arrow-up"></i>
      +8.0% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>ALLOWED</span>
        <b>0</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>EXCESS</span>
        <b class="negative">+1</b>
      </div>
    </div>
  </div>

  <!-- GEO LOCATION PUNCHES -->
  <div class="labor-card" onclick="openIssueModal('geo')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Geo Location Punches
      </div>

      <div class="labor-icon icon-purple">
        <i class="bi bi-geo-alt"></i>
      </div>
    </div>

    <div class="labor-value">1</div>

    <div class="labor-trend down">
      <i class="bi bi-arrow-down"></i>
      âˆ’2.0% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>OUTSIDE ZONE</span>
        <b>1</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>VARIANCE</span>
        <b class="negative">âˆ’1</b>
      </div>
    </div>
  </div>

</div>

               <!-- ISSUE MODAL -->
               <div id="issueModal" class="modal-overlay hidden" onclick="closeIssueModal(event)">
                  <div class="modal-box" onclick="event.stopPropagation()">
                     <div class="modal-header">
                        <span id="issueModalTitle"></span>
                        <i class="bi bi-x-lg" onclick="closeIssueModal()"></i>
                     </div>
                     <div class="modal-body">
                        <table class="fix-issues-table">
                           <thead>
                              <tr>
                                 <th>Date</th>
                                 <th>Employee</th>
                                 <th>Issue</th>
                                 <th>Job Code</th>
                                 <th>Clock In</th>
                              </tr>
                           </thead>
                           <tbody id="issueModalBody"></tbody>
                        </table>
                     </div>
                  </div>
               </div>
               <!-- FILTER BAR -->
               <div class="fix-filter-bar">
                  <button class="filter-btn" onclick="toggleIssueFilter()">
                  <i class="bi bi-funnel"></i>
                  Filter
                  </button>
                  <!-- FILTER POPOVER -->
                  <div id="issueFilterPopover" class="filter-popover">
                     <div class="filter-header">
                        <span>Issue Type</span>
                        <i class="bi bi-x" onclick="toggleIssueFilter()"></i>
                     </div>
                     <div class="filter-body">
                        <label><input type="checkbox" value="open" checked> Open Punch</label>
                        <label><input type="checkbox" value="mismatch" checked> Mismatched Punch</label>
                        <label><input type="checkbox" value="unauthorized" checked> Unauthorized Punch</label>
                        <label><input type="checkbox" value="geo" checked> Geo Location Punch</label>
                     </div>
                     <div class="filter-footer">
                        <button class="btn-clear" onclick="clearIssueFilter()">Clear</button>
                        <button class="btn-apply" onclick="applyIssueFilter()">Apply</button>
                     </div>
                  </div>
               </div>
               <!-- FIX ISSUES TABLE -->
               <div class="payroll-table-container" style="margin-top:20px;">
                  <table class="fix-issues-table">
                     <thead>
                        <tr>
                           <th>Date</th>
                           <th>Employee</th>
                           <th>Issue</th>
                           <th>Job Code</th>
                           <th>Clock In</th>
                           <th class="actions-header">
                              <span>Action(s)</span>
                              <i class="bi bi-search action-search-icon"
                                 title="Search Employee"
                                 onclick="toggleActionSearch()"></i>
                              <!-- hidden search input -->
                              <input
                                 type="text"
                                 id="actionSearchInput"
                                 placeholder="Search employee..."
                                 onkeyup="filterByEmployee(this.value)"
                                 />
                           </th>
                        </tr>
                     </thead>
                     <tbody>
                        <!-- Open Punch -->
                        <tr>
                           <td>12/30/2025</td>
                           <td class="emp-name">Christiano</td>
                           <td>
                              <span class="issue-pill issue-open">Open Punch</span>
                           </td>
                           <td>Assistant Manager</td>
                           <td>2:00 AM</td>
                           <td class="text-center">
                              <div class="action-icons">
                                 <i class="bi bi-pencil-square edit-icon"></i>
                                 <i class="bi bi-trash delete-icon"></i>
                              </div>
                           </td>
                        </tr>
                        <!-- Mismatched Punch -->
                        <tr>
                           <td>12/29/2025</td>
                           <td class="emp-name">Andrew K</td>
                           <td>
                              <span class="issue-pill issue-mismatch">Mismatched Punch</span>
                           </td>
                           <td>Shift Supervisor</td>
                           <td>9:10 AM</td>
                           <td class="text-center">
                              <div class="action-icons">
                                 <i class="bi bi-pencil-square edit-icon"></i>
                                 <i class="bi bi-trash delete-icon"></i>
                              </div>
                           </td>
                        </tr>
                        <!-- Unauthorized Punch -->
                        <tr>
                           <td>12/28/2025</td>
                           <td class="emp-name">Brandon C</td>
                           <td>
                              <span class="issue-pill issue-unauth">Unauthorized Punch</span>
                           </td>
                           <td>Crew Member</td>
                           <td>6:45 PM</td>
                           <td class="text-center">
                              <div class="action-icons">
                                 <i class="bi bi-pencil-square edit-icon"></i>
                                 <i class="bi bi-trash delete-icon"></i>
                              </div>
                           </td>
                        </tr>
                        <!-- Geo Location Punch -->
                        <tr>
                           <td>12/27/2025</td>
                           <td class="emp-name">Sophia M</td>
                           <td>
                              <span class="issue-pill issue-geo">Geo Location Punch</span>
                           </td>
                           <td>Cashier</td>
                           <td>11:32 AM</td>
                           <td class="text-center">
                              <div class="action-icons">
                                 <i class="bi bi-pencil-square edit-icon"></i>
                                 <i class="bi bi-trash delete-icon"></i>
                              </div>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <!--- Hourly Review Punches Tab -->
            <!-- HOURLY PUNCH KPI MODAL -->
            <div id="hourlyPunchModal" class="modal-overlay hidden" onclick="closeHourlyPunchModal(event)">
               <div class="modal-box" onclick="event.stopPropagation()">
                  <div class="modal-header">
                     <span id="hourlyPunchModalTitle"></span>
                     <i class="bi bi-x-lg" onclick="closeHourlyPunchModal()"></i>
                  </div>
                  <div class="modal-body">
                     <table class="fix-issues-table">
                        <thead>
                           <tr>
                              <th>Employee</th>
                              <th>Total Hrs</th>
                              <th>Time Loss Hrs</th>
                              <th>Time Loss ($)</th>
                           </tr>
                        </thead>
                        <tbody id="hourlyPunchModalBody"></tbody>
                     </table>
                  </div>
               </div>
            </div>
            <!-- EXTRA PAY VIEW -->
            <div id="extraPayView" class="tab-view hidden">
               <!-- EXTRA PAY TILES -->
<div class="fix-kpi-grid">

  <!-- TOTAL EXTRA PAY -->
  <div class="labor-card" onclick="openExtraPayModal('total')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Total Extra Pay
      </div>

      <div class="labor-icon icon-green">
        <i class="bi bi-cash-stack"></i>
      </div>
    </div>

    <div class="labor-value">$239.25</div>

    <div class="labor-trend up">
      <i class="bi bi-arrow-up"></i>
      +9.4% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>PROJECTED</span>
        <b>$260.00</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>VARIANCE</span>
        <b class="positive">+$20.75</b>
      </div>
    </div>
  </div>

  <!-- EXTRA PAY ENTRIES -->
  <div class="labor-card" onclick="openExtraPayModal('entries')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Extra Pay Entries
      </div>

      <div class="labor-icon icon-blue">
        <i class="bi bi-receipt"></i>
      </div>
    </div>

    <div class="labor-value">7</div>

    <div class="labor-trend up">
      <i class="bi bi-arrow-up"></i>
      +16.7% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>AVERAGE</span>
        <b>5</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>DELTA</span>
        <b class="positive">+2</b>
      </div>
    </div>
  </div>

  <!-- MOST USED REASON -->
  <div class="labor-card" onclick="openExtraPayModal('reason')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Most Used Reason
      </div>

      <div class="labor-icon icon-orange">
        <i class="bi bi-bar-chart"></i>
      </div>
    </div>

    <div class="labor-value" style="font-size:18px;">
      Paid Time-Off
      <span id="mostUsedReasonCount" class="kpi-count-badge"></span>
    </div>

    <div class="labor-trend up">
      <i class="bi bi-arrow-up"></i>
      +5.0% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>USAGE</span>
        <b>4</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>SHARE</span>
        <b class="positive">57%</b>
      </div>
    </div>
  </div>

  <!-- MOST UPDATED BY -->
  <div class="labor-card" onclick="openExtraPayModal('user')">
    <div class="labor-header">
      <div class="labor-title">
        <i class="bi bi-graph-up"></i>
        Most Updated By
      </div>

      <div class="labor-icon icon-purple">
        <i class="bi bi-person-check"></i>
      </div>
    </div>

    <div class="labor-value" style="font-size:18px;">
      Tushar
      <span id="mostUpdatedByCount" class="kpi-count-badge"></span>
    </div>

    <div class="labor-trend down">
      <i class="bi bi-arrow-down"></i>
      âˆ’3.2% this week
    </div>

    <div class="labor-footer">
      <div class="labor-footer-col">
        <span>ENTRIES</span>
        <b>3</b>
      </div>

      <div class="labor-footer-separator"></div>

      <div class="labor-footer-col right">
        <span>CONTRIBUTION</span>
        <b class="negative">43%</b>
      </div>
    </div>
  </div>

</div>

               <div class="fix-filter-bar"
                  style="display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; margin-bottom:12px;">
                  <!-- LEFT spacer -->
                  <div></div>
                  <!-- CENTER: FILTER -->
                  <div style="display:flex; justify-content:center;">
                     <button class="filter-btn" onclick="toggleExtraPayFilter()">
                     <i class="bi bi-funnel"></i>
                     Filter
                     </button>
                     <!-- EXTRA PAY FILTER POPOVER -->
                     <div id="extraPayFilterPopover" class="filter-popover">
                        <div class="filter-header">
                           <span>Reason</span>
                           <i class="bi bi-x" onclick="toggleExtraPayFilter()"></i>
                        </div>
                        <div class="filter-body" id="extraPayFilterBody"></div>
                        <div class="filter-footer">
                           <button class="btn-clear" onclick="clearExtraPayFilter()">Clear</button>
                           <button class="btn-apply" onclick="applyExtraPayFilter()">Apply</button>
                        </div>
                     </div>
                  </div>
                  <!-- RIGHT: ADD -->
                  <div style="display:flex; justify-content:flex-end;">
                     <button class="extra-pay-add-btn">
                     <i class="bi bi-plus"></i> Add
                     </button>
                  </div>
               </div>
               <!-- EXTRA PAY TABLE -->
               <div class="payroll-table-container">
                  <table class="fix-issues-table extra-pay-table">
                     <thead>
                        <tr>
                           <th>Date</th>
                           <th>Employees</th>
                           <th>Reason</th>
                           <th>Amount ($)</th>
                           <th>Last Updated By</th>
                           <th class="actions-header">
                              <span>Action(s)</span>
                              <i class="bi bi-search action-search-icon"
                                 onclick="toggleExtraPaySearch()"></i>
                              <input type="text"
                                 id="extraPaySearchInput"
                                 placeholder="Search employee..."
                                 onkeyup="filterExtraPay(this.value)">
                           </th>
                        </tr>
                     </thead>
                     <tbody id="extraPayTableBody"></tbody>
                  </table>
               </div>
            </div>
            <!-- EXTRA PAY MODAL -->
            <div id="extraPayModal" class="modal-overlay hidden" onclick="closeExtraPayModal(event)">
               <div class="modal-box" onclick="event.stopPropagation()">
                  <div class="modal-header">
                     <span id="extraPayModalTitle"></span>
                     <i class="bi bi-x-lg" onclick="closeExtraPayModal()"></i>
                  </div>
                  <div class="modal-body">
                     <table class="fix-issues-table">
                        <thead>
                           <tr>
                              <th>Date</th>
                              <th>Employee</th>
                              <th>Reason</th>
                              <th>Amount ($)</th>
                              <th>Updated By</th>
                           </tr>
                        </thead>
                        <tbody id="extraPayModalBody"></tbody>
                     </table>
                  </div>
               </div>
            </div>
            <div id="placeholderView" class="hidden" style="padding: 100px; text-align: center;">
               <i class="bi bi-box-seam" style="font-size: 80px; color: #cbd5e1;"></i>
               <p style="color: #94a3b8; margin-top: 20px;">No Data To Display</p>
            </div>
         </div>
      </main>
      <div id="timeLossModal" class="modal-overlay hidden" onclick="closeModal(event, 'timeLossModal')">
         <div id="modalContainer" class="dynamic-modal" onclick="event.stopPropagation()">
            <div class="modern-modal-header">
               <div>
                  <h2 style="font-size: 18px; font-weight: 700;">Current Week Time Loss</h2>
                  <p style="color: #64748b; font-size: 14px;">Andrew K</p>
               </div>
               <div style="display: flex; gap: 12px; align-items: center;">
                  <button class="nav-btn-box dark" onclick="toggleTimeLossView()" title="Toggle View">
                  <i id="viewIcon" class="bi bi-bar-chart-fill"></i>
                  </button>
                  <i class="bi bi-x-circle-fill" style="font-size: 24px; color: #cbd5e1; cursor: pointer;" onclick="document.getElementById('timeLossModal').style.display='none'"></i>
               </div>
            </div>
            <div class="modern-modal-body" style="padding: 0;">
               <div id="tableView">
                  <table class="formal-table">
                     <thead>
                        <tr>
                           <th>Date</th>
                           <th>Early Clock In (Hrs/$)</th>
                           <th>Late Clock Out (Hrs/$)</th>
                           <th>OT Loss (Hrs/$)</th>
                           <th>Break Loss (Hrs/$)</th>
                           <th style="color: #1e293b;">Total Time Loss (Hrs/$)</th>
                        </tr>
                     </thead>
                     <tbody id="timeLossTableBody"></tbody>
                  </table>
               </div>
               <div id="graphView" class="hidden">
                  <!-- Graph Toolbar -->
                  <div id="timeLossGraphToolbar"
                     style="
                     display: flex;
                     justify-content: flex-end;
                     padding: 12px 32px 8px 32px;
                     background: #ffffff;
                     border-bottom: 1px solid #f1f5f9;
                     ">
                     <select id="timeLossMetric"
                        onchange="updateTimeLossGraph(this.value)"
                        style="
                        padding: 6px 10px;
                        border-radius: 6px;
                        border: 1px solid #e2e8f0;
                        font-size: 13px;
                        font-weight: 600;
                        color: #1e293b;
                        background: #fff;
                        cursor: pointer;
                        ">
                        <option value="early">Early Clock In (Hrs/$)</option>
                        <option value="late">Late Clock Out (Hrs/$)</option>
                        <option value="ot">OT Loss (Hrs/$)</option>
                        <option value="break">Break Loss (Hrs/$)</option>
                        <option value="total" selected>Total Time Loss (Hrs/$)</option>
                     </select>
                  </div>
                  <div class="graph-viewport" id="barGraphContent">
                  </div>
               </div>
            </div>
            <div style="padding: 16px 32px; border-top: 1px solid #f1f5f9; display: flex; justify-content: flex-end;">
               <button class="modern-btn-close" style="background: #ef4444;" onclick="document.getElementById('timeLossModal').style.display='none'">Close</button>
            </div>
         </div>
      </div>
      </div>
      <div id="eyeActionModal" class="modal-overlay hidden" onclick="closeModal(event, 'eyeActionModal')">
         <div class="dynamic-modal graph-mode eye-modal-wide" onclick="event.stopPropagation()">
            <!-- HEADER -->
            <div class="modern-modal-header">
               <div>
                  <h2 style="font-size:18px;font-weight:700">Andrew K</h2>
                  <p style="font-size:13px;color:#64748b">
                     Pay Period: 01/27/2026 â€“ 02/02/2026
                  </p>
               </div>
               <i class="bi bi-x-circle-fill"
                  style="font-size:22px;color:#cbd5e1;cursor:pointer"
                  onclick="closeEyeAction()">
               </i>
            </div>
            <!-- KPI CARDS -->
            <div class="kpi-container">
               <div class="kpi-card border-blue">
                  <div class="kpi-header">
                     <span>TOTAL HOURS</span>
                     <div class="kpi-icon-badge icon-bg-blue" onclick="openKpiGraph('hrs')">
                        <i class="bi bi-bar-chart-fill"></i>
                     </div>
                  </div>
                  <b class="main-kpi-value">26.97</b>
                  <div class="kpi-divider"></div>
                  <div class="kpi-footer">
                     <div class="footer-item">
                        <span class="footer-label">YESTERDAY</span>
                        <span class="footer-value">8.50</span>
                     </div>
                     <div class="v-sep"></div>
                     <div class="footer-item">
                        <span class="footer-label">WTD</span>
                        <span class="footer-value">12.20</span>
                     </div>
                  </div>
               </div>
               <div class="kpi-card border-green">
                  <div class="kpi-header">
                     <span>Total Gross Pay</span>
                     <div class="kpi-icon-badge icon-bg-green" onclick="openKpiGraph('pay')">
                        <svg class="graph-icon-svg" viewBox="0 0 24 24" style="width: 18px; height: 18px;">
                           <path d="M4 20h16V4h-2v14H6V11h2v7h2V7h2v11h2v-4h2v4h2v2H4v-2z" fill-rule="evenodd"/>
                        </svg>
                     </div>
                  </div>
                  <b class="main-kpi-value">$579.78</b>
                  <div class="kpi-divider"></div>
                  <div class="kpi-footer">
                     <div class="footer-item">
                        <span class="footer-label">Yesterday</span>
                        <span class="footer-value">$140.20</span>
                     </div>
                     <div class="v-sep"></div>
                     <div class="footer-item">
                        <span class="footer-label">WTD</span>
                        <span class="footer-value">$420.50</span>
                     </div>
                  </div>
               </div>
               <div class="kpi-card border-orange">
                  <div class="kpi-header">
                     <span>OT Pay</span>
                     <div class="kpi-icon-badge icon-bg-orange" onclick="openKpiGraph('ot')">
                        <svg class="graph-icon-svg" viewBox="0 0 24 24" style="width: 18px; height: 18px;">
                           <path d="M4 20h16V4h-2v14H6V11h2v7h2V7h2v11h2v-4h2v4h2v2H4v-2z" fill-rule="evenodd"/>
                        </svg>
                     </div>
                  </div>
                  <b class="main-kpi-value">$90.00</b>
                  <div class="kpi-divider"></div>
                  <div class="kpi-footer">
                     <div class="footer-item">
                        <span class="footer-label">Yesterday</span>
                        <span class="footer-value">$0.00</span>
                     </div>
                     <div class="v-sep"></div>
                     <div class="footer-item">
                        <span class="footer-label">WTD</span>
                        <span class="footer-value">$45.00</span>
                     </div>
                  </div>
               </div>
               <div class="kpi-card border-purple">
                  <div class="kpi-header">
                     <span>Total Tips</span>
                     <div class="kpi-icon-badge icon-bg-purple" onclick="openKpiGraph('tips')">
                        <svg class="graph-icon-svg" viewBox="0 0 24 24" style="width: 18px; height: 18px;">
                           <path d="M4 20h16V4h-2v14H6V11h2v7h2V7h2v11h2v-4h2v4h2v2H4v-2z" fill-rule="evenodd"/>
                        </svg>
                     </div>
                  </div>
                  <b class="main-kpi-value">$80.00</b>
                  <div class="kpi-divider"></div>
                  <div class="kpi-footer">
                     <div class="footer-item">
                        <span class="footer-label">Yesterday</span>
                        <span class="footer-value">$12.00</span>
                     </div>
                     <div class="v-sep"></div>
                     <div class="footer-item">
                        <span class="footer-label">WTD</span>
                        <span class="footer-value">$35.00</span>
                     </div>
                  </div>
               </div>
            </div>
            <!-- SWITCHER -->
            <div class="view-toggle-container">
               <div class="toggle-pill">
                  <button class="active" onclick="switchEyeView('table')">Table View</button>
                  <button onclick="switchEyeView('graph')">Analytics</button>
               </div>
            </div>
            <!-- BODY -->
            <div class="modern-modal-body">
               <!-- TABLE VIEW (FULL DATA GOES HERE LATER) -->
               <div id="eyeTableView">
                  <!-- Punches Header -->
                  <div style="
                     display:flex;
                     justify-content:space-between;
                     align-items:center;
                     padding:16px 32px;
                     background:#ffffff;
                     border-bottom:1px solid #e2e8f0;
                     font-weight:600;
                     ">
                     <span style="color:#475569">
                     </span>
                  </div>
                  <!-- Punches Table -->
                  <div class="payroll-table-container" style="padding:16px 32px">
                     <table class="formal-table">
                        <thead>
                           <tr>
                              <th>Date</th>
                              <th>Clock In</th>
                              <th>Clock Out</th>
                              <th>Job Code</th>
                              <th>Break Hrs</th>
                              <th>Reg Hrs | Pay ($)</th>
                              <th>OT Hrs | Pay ($)</th>
                              <th>DT Hrs | Pay ($)</th>
                              <th>Total Hrs | Pay ($)</th>
                              <th>Credit Tip ($)</th>
                              <th>Cash Tip ($)</th>
                              <th>Total Tip ($)</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td>12/31/2025</td>
                              <td>08:57a</td>
                              <td>02:31p</td>
                              <td>ASST MGR</td>
                              <td>0.50</td>
                              <td>5.07 | 108.93</td>
                              <td>0.00 | 0.00</td>
                              <td>0.00 | 0.00</td>
                              <td>5.07 | 108.93</td>
                              <td>0.00</td>
                              <td>0.00</td>
                              <td>0.00</td>
                           </tr>
                           <tr>
                              <td>01/01/2026</td>
                              <td>01:01p</td>
                              <td>06:18p</td>
                              <td>ASST MGR</td>
                              <td>0.00</td>
                              <td>5.28 | 113.59</td>
                              <td>0.00 | 0.00</td>
                              <td>0.00 | 0.00</td>
                              <td>5.28 | 113.59</td>
                              <td>0.00</td>
                              <td>0.00</td>
                              <td>0.00</td>
                           </tr>
                           <!-- continue rows as needed -->
                        </tbody>
                     </table>
                  </div>
                  <!-- Extra Pay -->
                  <div style="padding:16px 32px;">
                     <div style="display:flex;justify-content:space-between;font-weight:600;">
                        <span>Extra Pay</span>
                        <span>Total Extra Pay : $0</span>
                     </div>
                     <div style="padding:16px;margin-top:10px;background:#f8fafc;text-align:center;">
                        No Data To Display
                     </div>
                  </div>
               </div>
               <!-- ANALYTICS VIEW -->
               <div id="eyeGraphView" class="analytics-view hidden">
                  <!-- Analytics Header -->
                  <div class="analytics-view-header">
                     <div class="analytics-view-title">
                        Analytics
                        <span>Daily trend for selected pay period</span>
                     </div>
                     <select class="metric-dropdown" onchange="renderEyeGraphs(this.value)">
                        <option value="hrs">Hours</option>
                        <option value="pay">Pay ($)</option>
                     </select>
                  </div>
                  <!-- Graph Area -->
                  <div class="analytics-view-body">
                     <div id="eyeGraphContent" class="eye-graph-viewport"></div>
                  </div>
               </div>
            </div>
            <!-- FOOTER -->
            <div style="padding:16px 32px;border-top:1px solid #f1f5f9;display:flex;justify-content:flex-end">
               <button class="modern-btn-close"
                  onclick="document.getElementById('eyeActionModal').classList.add('hidden')">
               Close
               </button>
            </div>
         </div>
      </div>
      </div>
      </div>
      <!-- KPI Graph Popup -->
      <div id="kpiGraphModal" class="modal-overlay hidden"
         onclick="closeModal(event, 'kpiGraphModal')">
         <div class="dynamic-modal"
            style="width:520px; height:420px;"
            onclick="event.stopPropagation()">
            <!-- Header -->
            <div class="modern-modal-header">
               <h3 id="kpiGraphTitle" style="font-size:16px;font-weight:700">
                  KPI Trend
               </h3>
               <i class="bi bi-x-circle-fill"
                  style="font-size:22px;color:#cbd5e1;cursor:pointer"
                  onclick="closeKpiGraph()">
               </i>
            </div>
            <!-- Graph -->
            <div style="padding:20px; height:320px;">
               <div id="kpiGraphContent" class="eye-graph-viewport"></div>
            </div>
            <div id="issueModal" class="modal-overlay hidden" onclick="closeIssueModal(event)">
               <div class="modal-box" onclick="event.stopPropagation()">
                  <!-- HEADER -->
                  <div class="modal-header">
                     <span id="issueModalTitle">Issue Records</span>
                     <i class="bi bi-x-lg" onclick="closeIssueModal()"></i>
                  </div>
                  <!-- BODY -->
                  <div class="modal-body">
                     <table class="fix-issues-table">
                        <thead>
                           <tr>
                              <th>Date</th>
                              <th>Employee</th>
                              <th>Issue</th>
                              <th>Job Code</th>
                              <th>Clock In</th>
                              <th class="text-center">Action(s)</th>
                           </tr>
                        </thead>
                        <tbody id="issueModalBody"></tbody>
                     </table>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <script>
         const employeeData = [
             { name: "Andrew K", reg: "29.22 | 628.16", ot: "0.00 | 0.00", dt: "0.00 | 0.00", ex: "0.00 | 0.00", total: "29.22 | 628.16", cTip: "0.00", csTip: "0.00", tTip: "0.00", tl: "4.82 | 103.56" },
             { name: "Brandon C", reg: "15.37 | 289.66", ot: "0.00 | 0.00", dt: "0.00 | 0.00", ex: "0.00 | 0.00", total: "15.37 | 289.66", cTip: "0.00", csTip: "0.00", tTip: "0.00", tl: "0.58 | 11.00" },
             { name: "Brandy P", reg: "3.03 | 53.39", ot: "0.00 | 0.00", dt: "0.00 | 0.00", ex: "0.00 | 0.00", total: "3.03 | 53.39", cTip: "0.00", csTip: "0.00", tTip: "0.00", tl: "0.03 | 0.59" },
             { name: "Brian E", reg: "19.28 | 339.39", ot: "0.00 | 0.00", dt: "0.00 | 0.00", ex: "0.00 | 0.00", total: "19.28 | 339.39", cTip: "0.00", csTip: "0.00", tTip: "0.00", tl: "2.00 | 35.20" }
         ];
         
         const kpiLast7Days = {
         hrs:  [4.5, 5.2, 3.8, 6.0, 5.5, 4.9, 6.1],
         pay:  [90, 105, 75, 120, 110, 98, 130],
         ot:   [0, 20, 0, 30, 0, 0, 40],
         tips: [5, 10, 0, 12, 8, 6, 15]
         };
         
         const last7Labels = ['01/27', '01/28', '01/29', '01/30', '01/31', '02/01', '02/02'];
         
         function openKpiGraph(type) {
         console.log("Opening graph for:", type);
         // Your existing modal logic here
         const modal = document.getElementById('kpiGraphModal');
         if (modal) {
            modal.classList.remove('hidden');
            modal.style.display = 'flex';
            // Trigger your render logic...
            if (typeof renderKpiBarChart === "function") {
                renderKpiBarChart(type);
            }
         }
         }
         
         function renderKpiBarChart(type) {
         const data = kpiLast7Days[type];
         const max = Math.max(...data) || 1;
         
         document.getElementById('kpiGraphContent').innerHTML = `
         <div class="eye-y-axis" style="border-right: 1px dashed #e2e8f0; padding-right: 15px;">
            <span>${max}</span>
            <span style="opacity: 0.5;">${(max/2).toFixed(0)}</span>
            <span>0</span>
         </div>
         
         <div class="eye-graph-bars" style="border: none; padding-bottom: 0;">
            ${data.map((v, i) => `
                <div class="bar-column" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%;">
                    <div class="eye-bar-label">${type === 'hrs' ? v : '$' + v}</div>
                    <div class="eye-bar" style="height:${(v/max)*80}%; background: ${getModernColor(type)};"></div>
                </div>
            `).join('')}
         </div>
         
         <div class="eye-x-axis" style="margin-top: 15px; padding-left: 60px;">
            ${last7Labels.map(d => `<span>${d}</span>`).join('')}
         </div>
         `;
         }
         
         // Helper for dynamic coloring based on KPI type
         function getModernColor(type) {
         const colors = { hrs: '#6366f1', pay: '#10b981', ot: '#f59e0b', tips: '#8b5cf6' };
         return colors[type] || '#6366f1';
         }
         
         
         function closeKpiGraph() {
         const modal = document.getElementById('kpiGraphModal');
         modal.classList.add('hidden');
         modal.style.display = 'none';
         }
         
         // Fix Issues Tab Data and Functions
         
         const fixIssuesData = [
         { date:'12/30/2025', emp:'Christiano', issue:'open', label:'Open Punch', job:'Assistant Manager', time:'2:00 AM' },
         { date:'12/29/2025', emp:'Andrew K', issue:'mismatch', label:'Mismatched Punch', job:'Shift Supervisor', time:'9:10 AM' },
         { date:'12/28/2025', emp:'Brandon C', issue:'unauthorized', label:'Unauthorized Punch', job:'Crew Member', time:'6:45 PM' },
         { date:'12/27/2025', emp:'Sophia M', issue:'geo', label:'Geo Location Punch', job:'Cashier', time:'11:32 AM' }
         ];
         
         function openIssueModal(type) {
         const modal = document.getElementById('issueModal');
         const body = document.getElementById('issueModalBody');
         const title = document.getElementById('issueModalTitle');
         
         const titles = {
         open: 'Open Punches',
         mismatch: 'Mismatched Punches',
         unauthorized: 'Unauthorized Punches',
         geo: 'Geo Location Punches'
         };
         
         title.innerText = titles[type];
         
         // Remove the <td> with the class "text-center" containing the icons
         body.innerHTML = fixIssuesData
         .filter(r => r.issue === type)
         .map(r => `
         <tr>
         <td>${r.date}</td>
         <td class="emp-name">${r.emp}</td>
         <td><span class="issue-pill issue-${r.issue}">${r.label}</span></td>
         <td>${r.job}</td>
         <td>${r.time}</td>
         </tr>
         `).join('');
         
         modal.classList.remove('hidden');
         modal.style.display = 'flex'; // Ensure it displays if you're using flex for centering
         }
         
         function closeIssueModal(e) {
         if (!e || e.target.id === 'issueModal') {
         document.getElementById('issueModal').classList.add('hidden');
         }
         }
         
         
         function renderFixIssues() {
         const tbody = document.getElementById("fixIssuesBody");
         tbody.innerHTML = fixIssuesData.map(row => `
         <tr>
         <td>${row.date}</td>
         <td style="font-weight:600">${row.employee}</td>
         <td>
         <span class="status-pill status-notsent">
          ${row.issue}
         </span>
         </td>
         <td>${row.job}</td>
         <td>${row.clockIn}</td>
         <td style="text-align:center;">
         <i class="bi bi-pencil-square action-icon" title="Fix Punch"></i>
         <i class="bi bi-trash action-icon" style="color:#ef4444;margin-left:10px;" title="Delete"></i>
         </td>
         </tr>
         `).join("");
         }
         
         function toggleActionSearch() {
         const input = document.getElementById('actionSearchInput');
         input.style.display = input.style.display === 'block' ? 'none' : 'block';
         input.focus();
         }
         
         function filterByEmployee(query) {
         const rows = document.querySelectorAll('.fix-issues-table tbody tr');
         const value = query.toLowerCase();
         
         rows.forEach(row => {
         const employee = row.querySelector('.emp-name')?.innerText.toLowerCase();
         row.style.display = employee.includes(value) ? '' : 'none';
         });
         }
         
         
         function toggleIssueFilter() {
         const popover = document.getElementById("issueFilterPopover");
         popover.style.display = popover.style.display === "block" ? "none" : "block";
         }
         
         function applyIssueFilter() {
         const checked = [...document.querySelectorAll('.filter-body input:checked')]
         .map(cb => cb.value);
         
         document.querySelectorAll('.fix-issues-table tbody tr').forEach(row => {
         const issue = row.querySelector('.issue-pill').className;
         
         const match =
         (checked.includes("open") && issue.includes("issue-open")) ||
         (checked.includes("mismatch") && issue.includes("issue-mismatch")) ||
         (checked.includes("unauthorized") && issue.includes("issue-unauth")) ||
         (checked.includes("geo") && issue.includes("issue-geo"));
         
         row.style.display = match ? "" : "none";
         });
         
         toggleIssueFilter();
         }
         
         function clearIssueFilter() {
         document.querySelectorAll('.filter-body input').forEach(cb => cb.checked = true);
         applyIssueFilter();
         }
         
         
         // Extra Pay Tab Data and Functions
         
         /* ===== EXTRA PAY POPUP DATA ===== */
         const extraPayData = [
         { date:'01/28/2026', emp:'Andrew K',  reason:'Paid Time-Off', amount:'45.00', updatedBy:'Tushar' },
         { date:'01/29/2026', emp:'Sophia M',  reason:'Holiday',       amount:'40.00', updatedBy:'Rahul' },
         
         { date:'01/30/2026', emp:'Christiano', reason:'Paid Time-Off', amount:'30.00', updatedBy:'Tushar' },
         { date:'01/30/2026', emp:'Brandon C',  reason:'Missed Punch Correction', amount:'25.50', updatedBy:'Tushar' },
         { date:'01/31/2026', emp:'Andrew K',   reason:'Training Pay', amount:'60.00', updatedBy:'Tushar' },
         ];
         
         let selectedExtraPayReasons = [];
         
         function updateExtraPayKpiCounts() {
         // Most Used Reason count
         const reason = 'Paid Time-Off';
         const reasonCount = extraPayData.filter(r => r.reason === reason).length;
         document.getElementById('mostUsedReasonCount').innerText = reasonCount;
         
         // Most Updated By count
         const user = 'Tushar';
         const userCount = extraPayData.filter(r => r.updatedBy === user).length;
         document.getElementById('mostUpdatedByCount').innerText = userCount;
         }
         
         
         function openExtraPayModal(type) {
         const modal = document.getElementById('extraPayModal');
         const body  = document.getElementById('extraPayModalBody');
         const title = document.getElementById('extraPayModalTitle');
         
         body.innerHTML = '';
         
         let filtered = [...extraPayData];
         
         if (type === 'reason') {
         title.innerText = 'Extra Pay â€“ Paid Time-Off';
         filtered = filtered.filter(r => r.reason === 'Paid Time-Off');
         }
         else if (type === 'user') {
         title.innerText = 'Extra Pay â€“ Updated By Tushar';
         filtered = filtered.filter(r => r.updatedBy === 'Tushar');
         }
         else if (type === 'entries') {
         title.innerText = 'All Extra Pay Entries';
         }
         else {
         title.innerText = 'Total Extra Pay Breakdown';
         }
         
         filtered.forEach(r => {
         body.innerHTML += `
         <tr>
         <td>${r.date}</td>
         <td class="emp-name">${r.emp}</td>
         <td>${r.reason}</td>
         <td>$${r.amount}</td>
         <td>${r.updatedBy}</td>
         </tr>`;
         });
         
         modal.classList.remove('hidden');
         }
         
         function closeExtraPayModal(e) {
         if (!e || e.target.id === 'extraPayModal') {
         document.getElementById('extraPayModal').classList.add('hidden');
         }
         }
         
         function renderExtraPay() {
         const tbody = document.getElementById("extraPayTableBody");
         
         tbody.innerHTML = extraPayData.map(row => `
         <tr>
         <td>${row.date}</td>
         <td class="emp-name">${row.emp}</td>
         <td>${row.reason}</td>
         <td style="text-align:right;">${row.amount}</td>
         <td>${row.updatedBy}</td>
         <td class="text-center">
         <div class="action-icons">
          <i class="bi bi-pencil-square edit-icon"></i>
          <i class="bi bi-trash delete-icon"></i>
         </div>
         </td>
         </tr>
         `).join("");
         }
         
         
         function toggleExtraPaySearch() {
         const input = document.getElementById('extraPaySearchInput');
         input.style.display = input.style.display === 'block' ? 'none' : 'block';
         input.focus();
         }
         
         
         function filterExtraPay(value) {
         const rows = document.querySelectorAll("#extraPayTableBody tr");
         const search = value.toLowerCase();
         
         rows.forEach(row => {
         const emp = row.querySelector(".emp-name").innerText.toLowerCase();
         row.style.display = emp.includes(search) ? "" : "none";
         });
         }
         
         function toggleExtraPayFilter() {
         const popover = document.getElementById("extraPayFilterPopover");
         const body = document.getElementById("extraPayFilterBody");
         
         const isOpen = popover.style.display === "block";
         
         if (!isOpen) {
         const reasons = [...new Set(extraPayData.map(r => r.reason))];
         
         // initialize state on first open
         if (selectedExtraPayReasons.length === 0) {
         selectedExtraPayReasons = [...reasons];
         }
         
         body.innerHTML = reasons.map(reason => `
         <label>
         <input type="checkbox"
               value="${reason}"
               ${selectedExtraPayReasons.includes(reason) ? "checked" : ""}>
         ${reason}
         </label>
         `).join("");
         
         popover.style.display = "block";
         } else {
         popover.style.display = "none";
         }
         }
         
         
         function applyExtraPayFilter() {
         selectedExtraPayReasons = [...document.querySelectorAll(
         '#extraPayFilterBody input:checked'
         )].map(cb => cb.value);
         
         document.querySelectorAll('#extraPayTableBody tr').forEach(row => {
         const reason = row.children[2]?.innerText;
         row.style.display = selectedExtraPayReasons.includes(reason) ? "" : "none";
         });
         
         toggleExtraPayFilter();
         }
         
         
         function clearExtraPayFilter() {
         const reasons = [...new Set(extraPayData.map(r => r.reason))];
         selectedExtraPayReasons = [...reasons];
         
         document
         .querySelectorAll('#extraPayFilterBody input')
         .forEach(cb => cb.checked = true);
         
         applyExtraPayFilter();
         }
         
         
         // Review Hourly Punches Tiles Tab Data and Functions
         const hourlyPunchData = [
         { emp:'Andrew K',  regular:'29.22 | 628.16', total:'29.22 | 628.16', loss:'4.82 | 103.56' },
         { emp:'Brandon C', regular:'15.37 | 289.66', total:'15.37 | 289.66', loss:'0.58 | 11.00' },
         { emp:'Brandy P',  regular:'3.03 | 53.39',  total:'3.03 | 53.39',  loss:'0.03 | 0.59' },
         { emp:'Brian E',   regular:'19.28 | 339.39', total:'19.28 | 339.39', loss:'2.00 | 35.20' }
         ];
         
         
         const hourlyPunchRows = [
         {
         emp: "Andrew K",
         regular: "29.22 | 628.16",
         ot: "0.00 | 0.00",
         dt: "0.00 | 0.00",
         extra: "0.00 | 0.00",
         total: "29.22 | 628.16",
         credit: "0.00",
         cash: "0.00",
         tip: "0.00",
         loss: "4.82 | 103.56"
         },
         {
         emp: "Brandon C",
         regular: "15.37 | 289.66",
         ot: "0.00 | 0.00",
         dt: "0.00 | 0.00",
         extra: "0.00 | 0.00",
         total: "15.37 | 289.66",
         credit: "0.00",
         cash: "0.00",
         tip: "0.00",
         loss: "0.58 | 11.00"
         },
         {
         emp: "Brandy P",
         regular: "3.03 | 53.39",
         ot: "0.00 | 0.00",
         dt: "0.00 | 0.00",
         extra: "0.00 | 0.00",
         total: "3.03 | 53.39",
         credit: "0.00",
         cash: "0.00",
         tip: "0.00",
         loss: "0.03 | 0.59"
         },
         {
         emp: "Brian E",
         regular: "19.28 | 339.39",
         ot: "0.00 | 0.00",
         dt: "0.00 | 0.00",
         extra: "0.00 | 0.00",
         total: "19.28 | 339.39",
         credit: "0.00",
         cash: "0.00",
         tip: "0.00",
         loss: "2.00 | 35.20"
         }
         ];
         
         function renderHourlyPunchTable() {
         const tbody = document.getElementById('hourlyTableBody');
         tbody.innerHTML = '';
         
         hourlyPunchData.forEach(r => {
         tbody.innerHTML += `
         <tr>
         <td class="emp-name">${r.emp}</td>
         <td>${r.regular}</td>
         <td>0.00 | 0.00</td>
         <td>0.00 | 0.00</td>
         <td>0.00 | 0.00</td>
         <td>${r.total}</td>
         <td>0.00</td>
         <td>0.00</td>
         <td>0.00</td>
         <td class="link-blue">${r.loss}</td>
         <td class="text-center"><i class="bi bi-eye eye-btn"></i></td>
         </tr>`;
         });
         }
         
         
         
         function getRegularHrsPaySummary() {
         const totalHrs = hourlyPunchData.reduce((s,e) => s + e.totalHrs, 0);
         const totalPay = hourlyPunchData.reduce((s,e) => s + (e.totalHrs * 20), 0); 
         // assume $20/hr â€“ replace with actual rate if available
         
         return {
         hrs: totalHrs.toFixed(2),
         pay: totalPay.toFixed(2)
         };
         }
         
         function updateHourlyPunchKPIs() {
         let regularHrs = 0, regularPay = 0;
         let totalHrs = 0, totalPay = 0;
         let lossHrs = 0, lossPay = 0;
         
         let highestLossEmp = null;
         let highestLossPay = 0;
         let highestLossHrs = 0;
         
         document.querySelectorAll('#hourlyTableBody tr').forEach(row => {
         const cells = row.querySelectorAll('td');
         
         const emp = cells[0].innerText.trim();
         
         // Regular
         const [rHrs, rPay] = cells[1].innerText.split('|').map(v => parseFloat(v));
         // Total
         const [tHrs, tPay] = cells[5].innerText.split('|').map(v => parseFloat(v));
         // Time Loss
         const [lHrs, lPay] = cells[9].innerText.split('|').map(v => parseFloat(v));
         
         regularHrs += rHrs;
         regularPay += rPay;
         
         totalHrs += tHrs;
         totalPay += tPay;
         
         lossHrs += lHrs;
         lossPay += lPay;
         
         if (lPay > highestLossPay) {
         highestLossPay = lPay;
         highestLossHrs = lHrs;
         highestLossEmp = emp;
         }
         });
         
         document.getElementById('kpiRegularHrsPay').innerText =
         `${regularHrs.toFixed(2)} | $${regularPay.toFixed(2)}`;
         
         document.getElementById('kpiTotalHrsPay').innerText =
         `${totalHrs.toFixed(2)} | $${totalPay.toFixed(2)}`;
         
         document.getElementById('kpiLossHrsPay').innerText =
         `${lossHrs.toFixed(2)} | $${lossPay.toFixed(2)}`;
         
         document.getElementById('kpiHighestLossEmp').innerText =
         highestLossEmp || 'â€”';
         
         document.getElementById('kpiHighestLossVal').innerText =
         highestLossEmp ? `${highestLossHrs.toFixed(2)} | $${highestLossPay.toFixed(2)}` : '0.00 | $0.00';
         }
         
         
         
         
         function openHourlyPunchModal(type) {
         const modal = document.getElementById('hourlyPunchModal');
         const title = document.getElementById('hourlyPunchModalTitle');
         const body  = document.getElementById('hourlyPunchModalBody');
         const thead = modal.querySelector('thead tr');
         
         body.innerHTML = '';
         
         if (type === 'regular') {
         title.innerText = 'Regular Hours | Pay';
         thead.innerHTML = '<th>Employee</th><th>Regular Hrs</th><th>Pay ($)</th>';
         
         hourlyPunchData.forEach(r => {
         const [h,p] = r.regular.split('|').map(v=>v.trim());
         body.innerHTML += `<tr><td>${r.emp}</td><td>${h}</td><td>$${p}</td></tr>`;
         });
         }
         
         if (type === 'total') {
         title.innerText = 'Total Hours | Pay';
         thead.innerHTML = '<th>Employee</th><th>Total Hrs</th><th>Pay ($)</th>';
         
         hourlyPunchData.forEach(r => {
         const [h,p] = r.total.split('|').map(v=>v.trim());
         body.innerHTML += `<tr><td>${r.emp}</td><td>${h}</td><td>$${p}</td></tr>`;
         });
         }
         
         if (type === 'loss') {
         title.innerText = 'Time Loss Hours | Pay';
         thead.innerHTML = '<th>Employee</th><th>Loss Hrs</th><th>Loss ($)</th>';
         
         hourlyPunchData.forEach(r => {
         const [h,p] = r.loss.split('|').map(v=>v.trim());
         if (parseFloat(h) > 0)
         body.innerHTML += `<tr><td>${r.emp}</td><td>${h}</td><td>$${p}</td></tr>`;
         });
         }
         
         if (type === 'highest') {
         const max = hourlyPunchData.reduce((a,b)=>
         parseFloat(b.loss.split('|')[1]) > parseFloat(a.loss.split('|')[1]) ? b : a
         );
         
         title.innerText = 'Highest Time Loss';
         thead.innerHTML = '<th>Employee</th><th>Loss Hrs</th><th>Loss ($)</th>';
         
         const [h,p] = max.loss.split('|').map(v=>v.trim());
         body.innerHTML = `<tr><td>${max.emp}</td><td>${h}</td><td>$${p}</td></tr>`;
         }
         
         modal.classList.remove('hidden');
         }
         
         
         
         function closeHourlyPunchModal(e) {
         if (!e || e.target.id === 'hourlyPunchModal') {
         document.getElementById('hourlyPunchModal').classList.add('hidden');
         }
         }
         
         function refreshReviewHourlyPunchKPIs() {
         const rows = document.querySelectorAll('#hourlyTableBody tr');
         if (!rows.length) return;   // table not ready yet
         
         updateHourlyPunchKPIs();
         }
         
         function showReviewHourlyPunches() {
         // existing tab logic
         activateTab('reviewHourlyPunches');
         
         // NEW: update KPIs AFTER table is visible
         setTimeout(refreshHourlyPunchKPIs, 0);
         }
         
         
         // Submit Payroll Tab Data and Functions
         
         function togglePayrollInsights() {
         const insights = document.getElementById('payrollInsights');
         
         if (!insights) {
         console.warn('Payroll Insights container not found');
         return;
         }
         
         const isHidden = insights.classList.contains('hidden');
         
         // Toggle visibility
         insights.classList.toggle('hidden');
         
         // ðŸ”‘ Lazy-load logic (only when opening)
         if (isHidden) {
         // Future-safe hooks
         if (typeof buildPayrollInsights === 'function') {
         buildPayrollInsights();
         }
         }
         }
         
         let payrollInsightsBuilt = false;
         
         const payrollData = {
         regular: 864.31,
         ot: 124.75,
         dt: 48.50,
         extra: 75.00,
         
         employees: 9,
         
         distribution: [
         { label: 'Andrew K', value: 420 },
         { label: 'Sophia M', value: 260 },
         { label: 'Brandon C', value: 180 },
         { label: 'Others', value: 252.56 }
         ]
         };
         
         function getTotalPayroll() {
         return payrollData.regular +
         payrollData.ot +
         payrollData.dt +
         payrollData.extra;
         }
         
         
         function buildPayrollInsights() {
         // Refresh global metrics and AI cards
         if (typeof populateInsightKPIs === "function") populateInsightKPIs();
         if (typeof buildAIPayrollInsights === "function") buildAIPayrollInsights();
         
         // Preparation: Using demo-optimized values for visual impact
         const payroll = {
         regular: 864.31,
         ot: 424.75, // Increased for demo visibility
         dt: 248.50, // Increased for demo visibility
         extra: 375.00 // Increased for demo visibility
         };
         
         const colors = {
         regular: '#3b82f6', 
         ot: '#f59e0b',      
         dt: '#ef4444',      
         extra: '#8b5cf6'    
         };
         
         /* ===========================================
         CHART 1: PAYROLL BREAKDOWN (PRO SCALE)
         =========================================== */
         const breakdownChart = document.getElementById('payrollBarChart');
         if (breakdownChart) {
         breakdownChart.innerHTML = '';
         // Lowering the multiplier from 1.15 to 1.05 to make bars taller
         const maxVal = Math.max(...Object.values(payroll)) * 1.05; 
         
         Object.entries(payroll).forEach(([key, val]) => {
            const barWrapper = document.createElement('div');
            barWrapper.className = 'bar-wrapper';
            const height = (val / maxVal) * 100;
            
            barWrapper.innerHTML = `
                <span class="bar-value-label" style="font-weight:800; margin-bottom:10px;">$${val.toFixed(2)}</span>
                <div class="bar" style="height: ${height}%; background-color: ${colors[key]}; width: 55px; border-radius: 12px 12px 4px 4px; box-shadow: 0 4px 12px -2px ${colors[key]}44;"></div>
                <span class="bar-name-label" style="margin-top:12px; font-weight:700;">${key.toUpperCase()}</span>
            `;
            breakdownChart.appendChild(barWrapper);
         });
         }
         
         /* ===========================================
         CHART 2: SVG DONUT (AUTOLOAD FIX)
         =========================================== */
         const total = Object.values(payroll).reduce((a, b) => a + b, 0);
         const svg = document.getElementById('payrollSvg');
         const centerVal = document.getElementById('donutCenterValue');
         const centerLabel = document.getElementById('donutCenterLabel');
         
         if (svg) {
         centerVal.innerText = `$${total.toFixed(2)}`;
         centerLabel.innerText = 'Total';
         svg.innerHTML = ''; 
         let currentPercent = 0;
         const palette = ['#3b82f6', '#22c55e', '#f59e0b', '#8b5cf6'];
         
         // Demo distribution
         const dist = [
            { label: 'Andrew K', value: total * 0.4 },
            { label: 'Sarah M', value: total * 0.3 },
            { label: 'Andrew R', value: total * 0.2 },
            { label: 'Others', value: total * 0.1 }
         ];
         
         dist.forEach((emp, i) => {
            const percent = (emp.value / total) * 100;
            const segment = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            segment.setAttribute("class", "donut-segment");
            segment.setAttribute("cx", "20"); segment.setAttribute("cy", "20"); segment.setAttribute("r", "15.9155");
            segment.setAttribute("stroke", palette[i % palette.length]);
            segment.setAttribute("stroke-dasharray", `${percent} ${100 - percent}`);
            segment.setAttribute("stroke-dashoffset", -currentPercent);
            
            segment.addEventListener('mouseenter', () => {
                centerVal.innerText = `$${emp.value.toFixed(2)}`;
                centerLabel.innerText = emp.label;
            });
            segment.addEventListener('mouseleave', () => {
                centerVal.innerText = `$${total.toFixed(2)}`;
                centerLabel.innerText = 'Total';
            });
            svg.appendChild(segment);
            currentPercent += percent;
         });
         }
         
         /* ===========================================
         CHART 3: PAYROLL VS LAST PERIOD (PRO SCALE)
         =========================================== */
         const compareChart = document.querySelector('.compare-bar-chart');
         if (compareChart) {
         compareChart.innerHTML = '';
         const compareData = [
            { label: 'Reg', cur: 4200, prev: 4600 },
            { label: 'OT', cur: 2200, prev: 1800 },
            { label: 'DT', cur: 1500, prev: 1200 },
            { label: 'Extra', cur: 1800, prev: 1100 }
         ];
         
         // Tight maxVal for taller appearance
         const maxCompare = 4800; 
         
         compareData.forEach(item => {
            const col = document.createElement('div');
            col.className = 'compare-col';
            col.style.cssText = "display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex: 1;";
            
            col.innerHTML = `
                <div style="display: flex; gap: 10px; align-items: flex-end; height: 180px; margin-bottom: 12px;">
                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%;">
                        <span style="font-size: 10px; font-weight: 800; color: #3b82f6; margin-bottom: 4px;">$${(item.cur/1000).toFixed(1)}k</span>
                        <div class="bar" style="height: ${(item.cur/maxCompare)*100}%; width: 24px; background: #3b82f6; border-radius: 6px 6px 0 0;"></div>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%;">
                        <span style="font-size: 10px; font-weight: 800; color: #10b981; margin-bottom: 4px;">$${(item.prev/1000).toFixed(1)}k</span>
                        <div class="bar" style="height: ${(item.prev/maxCompare)*100}%; width: 24px; background: #10b981; border-radius: 6px 6px 0 0;"></div>
                    </div>
                </div>
                <span style="font-size: 11px; font-weight: 800; color: #64748b;">${item.label}</span>
            `;
            compareChart.appendChild(col);
         });
         }
         
         /* ===========================================
         CHART 4: COST PER EMPLOYEE (PRO SCALE)
         =========================================== */
         const efficiencyChart = document.querySelector('.efficiency-chart');
         if (efficiencyChart) {
         efficiencyChart.innerHTML = '';
         const effData = { current: 987, last: 1120 };
         const maxEff = 1200;
         efficiencyChart.innerHTML = `
            <div style="display: flex; align-items: flex-end; gap: 60px; height: 100%; justify-content: center;">
                <div style="text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%;">
                    <b style="font-size: 16px; font-weight: 900; margin-bottom: 8px; color: #3b82f6;">$${effData.current}</b>
                    <div style="height: ${(effData.current/maxEff)*160}px; width: 65px; background: #3b82f6; border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(59,130,246,0.3);"></div>
                    <span style="font-size: 12px; font-weight: 700; color: #64748b; margin-top: 10px;">This Period</span>
                </div>
                <div style="text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%;">
                    <b style="font-size: 16px; font-weight: 900; margin-bottom: 8px; color: #10b981;">$${effData.last}</b>
                    <div style="height: ${(effData.last/maxEff)*160}px; width: 65px; background: #10b981; border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(16,185,129,0.3);"></div>
                    <span style="font-size: 12px; font-weight: 700; color: #64748b; margin-top: 10px;">Last Period</span>
                </div>
            </div>
         `;
         }
         }
         
         
         function populateSubmitPayrollTiles() {
         document.getElementById('regPay').innerText =
         `$${payrollData.regular.toFixed(2)}`;
         
         document.getElementById('otPay').innerText =
         `$${payrollData.ot.toFixed(2)}`;
         
         document.getElementById('dtPay').innerText =
         `$${payrollData.dt.toFixed(2)}`;
         
         document.getElementById('extraPay').innerText =
         `$${payrollData.extra.toFixed(2)}`;
         
         document.getElementById('totalPay').innerText =
         `$${getTotalPayroll().toFixed(2)}`;
         }
         
         
         function populateInsightKPIs(){
         
         const totalPayroll = getTotalPayroll();
         const otPercent = totalPayroll
         ? (payrollData.ot / totalPayroll) * 100
         : 0;
         
         // OT %
         document.getElementById('insOTPercent').innerText =
         `${otPercent.toFixed(1)}%`;
         
         document.getElementById('insOTNote').innerText =
         otPercent === 0
         ? 'No overtime recorded'
         : 'Overtime detected';
         
         /* ===============================
         RISK FLAG LOGIC
         =============================== */
         
         const risks = [];
         
         if (otPercent > 10) {
         risks.push('Overtime exceeds 10% of total payroll');
         }
         
         if (payrollData.extra > 200) {
         risks.push('High extra pay adjustments detected');
         }
         
         if (payrollData.dt > 0) {
         risks.push('Double-time hours present');
         }
         
         const riskCount = risks.length;
         
         document.getElementById('insRiskCount').innerText = riskCount;
         document.getElementById('insRiskLabel').innerText =
         riskCount === 0 ? 'No risks detected' : 'Review required';
         
         // Tooltip list
         const list = document.getElementById('riskTooltipList');
         list.innerHTML = '';
         
         if (riskCount === 0) {
         list.innerHTML = '<li>No payroll anomalies detected.</li>';
         } else {
         risks.forEach(r => {
         const li = document.createElement('li');
         li.textContent = r;
         list.appendChild(li);
         });
         }
         }
         
         function showRiskTooltip(e){
         document.getElementById('riskTooltip')
         .classList.remove('hidden');
         }
         
         function hideRiskTooltip(){
         document.getElementById('riskTooltip')
         .classList.add('hidden');
         }
         
         function buildAIPayrollInsights() {
         
         const insights = [];
         const total = getTotalPayroll();
         
         const otPercent = total ? (payrollData.ot / total) * 100 : 0;
         const extraPercent = total ? (payrollData.extra / total) * 100 : 0;
         
         /* ===============================
         PAYROLL CHANGE EXPLANATION
         =============================== */
         if (otPercent === 0) {
         insights.push({
         type: 'positive',
         icon: 'bi-graph-down-arrow',
         text: 'Payroll dropped mainly due to <b>zero overtime hours</b>.'
         });
         } else {
         insights.push({
         type: 'warning',
         icon: 'bi-clock-history',
         text: `Overtime contributes <b>${otPercent.toFixed(1)}%</b> of total payroll.`
         });
         }
         
         /* ===============================
         PAYROLL CONCENTRATION
         =============================== */
         const sorted = [...payrollData.distribution]
         .sort((a, b) => b.pay - a.pay);
         
         const top3 = sorted.slice(0, 3)
         .reduce((sum, e) => sum + e.pay, 0);
         
         const top3Percent = total ? (top3 / total) * 100 : 0;
         
         if (top3Percent > 50) {
         insights.push({
         type: 'info',
         icon: 'bi-people',
         text: `Top <b>3 employees</b> account for <b>${top3Percent.toFixed(0)}%</b> of total payroll.`
         });
         }
         
         /* ===============================
         EXTRA PAY CHECK
         =============================== */
         if (extraPercent === 0) {
         insights.push({
         type: 'positive',
         icon: 'bi-shield-check',
         text: 'No extra pay anomalies detected.'
         });
         } else {
         insights.push({
         type: 'info',
         icon: 'bi-cash-stack',
         text: `Extra pay accounts for <b>${extraPercent.toFixed(1)}%</b> of payroll.`
         });
         }
         
         /* ===============================
         FINALIZATION STATUS
         =============================== */
         insights.push({
         type: 'positive',
         icon: 'bi-check-circle',
         text: 'All punches are finalized with no critical issues.'
         });
         
         renderAIPayrollInsights(insights);
         }   
         
         function renderAIPayrollInsights(insights) {
         const list = document.getElementById('aiInsightsList');
         list.innerHTML = '';
         
         insights.forEach(insight => {
         const li = document.createElement('li');
         li.className = insight.type || '';
         li.innerHTML = `
         <i class="bi ${insight.icon}"></i>
         <span>${insight.text}</span>
         `;
         list.appendChild(li);
         });
         }
         
         
         
         function showDetailView(period) {
             document.getElementById('landingScreen').classList.add('hidden');
             document.getElementById('detailScreen').classList.remove('hidden');
             document.getElementById('activePeriod').innerText = period;
             renderHourlyPunches();
         }
         
         function showLandingView() {
             document.getElementById('detailScreen').classList.add('hidden');
             document.getElementById('landingScreen').classList.remove('hidden');
         }
         
         function setActiveStep(element, tab) {
         
         /* ===============================
         1. ACTIVATE STEPPER UI
         =============================== */
         document.querySelectorAll('.step-item')
         .forEach(step => step.classList.remove('active'));
         element.classList.add('active');
         
         
         /* ===============================
         2. HIDE ALL TAB VIEWS (RESET)
         =============================== */
         const views = [
         'fixIssuesView',
         'extraPayView',
         'hourlyView',
         'submitPayrollView'   // ðŸ”‘ NEW
         ];
         
         views.forEach(id => {
         const el = document.getElementById(id);
         if (el) el.classList.add('hidden');
         });
         
         
         /* ===============================
         3. FIX ISSUES TAB
         =============================== */
         if (tab === 'fix') {
         document.getElementById('fixIssuesView')
         .classList.remove('hidden');
         }
         
         
         /* ===============================
         4. EXTRA PAY TAB
         =============================== */
         if (tab === 'extra') {
         document.getElementById('extraPayView')
         .classList.remove('hidden');
         
         if (typeof renderExtraPay === 'function') {
         renderExtraPay();
         }
         }
         
         
         /* ===============================
         5. REVIEW HOURLY PUNCHES TAB
         (KEEP YOUR KPI LOGIC SAFE)
         =============================== */
         if (tab === 'hourly') {
         const hourlyView = document.getElementById('hourlyView');
         hourlyView.classList.remove('hidden');
         
         // ðŸ”‘ Ensure KPIs calculate AFTER render
         setTimeout(() => {
         if (typeof updateHourlyPunchKPIs === 'function') {
         updateHourlyPunchKPIs();
         }
         }, 0);
         }
         
         
         /* ===============================
         6. SUBMIT PAYROLL TAB  â­ NEW
         =============================== */
         if (tab === 'submit') {
         document.getElementById('submitPayrollView').classList.remove('hidden');
         populateSubmitPayrollTiles();
         
         const insights = document.getElementById('payrollInsights');
         if (insights) insights.classList.add('hidden');
         }
         
         }
         
         
         
         document.addEventListener('DOMContentLoaded', () => {
         renderExtraPay();              // if you already call this
         updateExtraPayKpiCounts();     // ðŸ‘ˆ add this here
         updateHourlyPunchKPIs();
         renderHourlyPunchTable();
         });
         
         document.addEventListener('DOMContentLoaded', () => {
         const defaultStep = document.querySelector('.step-item[onclick*="fix"]');
         
         if (defaultStep) {
         setActiveStep(defaultStep, 'fix');
         }
         });
         
         
         
         function renderHourlyPunches() {
             const tbody = document.getElementById('hourlyTableBody');
             tbody.innerHTML = employeeData.map(emp => `
                 <tr>
                     <td style="font-weight:600">${emp.name}</td>
                     <td>${emp.reg}</td>
                     <td>${emp.ot}</td>
                     <td>${emp.dt}</td>
                     <td>${emp.ex}</td>
                     <td>${emp.total}</td>
                     <td>${emp.cTip}</td>
                     <td>${emp.csTip}</td>
                     <td>${emp.tTip}</td>
                     <td><span class="link-blue" onclick="openTimeLoss()">${emp.tl}</span></td>
                     <td style="text-align:center"><i class="bi bi-eye eye-btn" onclick="openEyeAction()"></i></td>
                 </tr>
             `).join('');
         }
         
         const highValueData = [
         { date: "01/02/2026", early: "5.50 | $ 120.00", late: "2.10 | $ 45.00", ot: "0.00", break: "0.00", total: "7.60 | $ 165.00", val: 165.00 },
         { date: "02/02/2026", early: "8.20 | $ 180.50", late: "0.00 | $ 0.00", ot: "1.50 | $ 40.00", break: "0.00", total: "9.70 | $ 220.50", val: 220.50 },
         { date: "03/02/2026", early: "12.00 | $ 260.00", late: "4.50 | $ 95.00", ot: "0.00", break: "1.00 | $ 20.00", total: "17.50 | $ 375.00", val: 375.00 },
         { date: "04/02/2026", early: "3.10 | $ 65.00", late: "10.20 | $ 210.00", ot: "2.00 | $ 50.00", break: "0.00", total: "15.30 | $ 325.00", val: 325.00 },
         { date: "05/02/2026", early: "15.00 | $ 310.00", late: "1.50 | $ 30.00", ot: "0.00", break: "2.00 | $ 45.00", total: "18.50 | $ 385.00", val: 385.00 }
         ];
         
         function openPunches() { document.getElementById('punchModal').style.display = 'flex'; }
         
         function openTimeLoss() {
         const modalOverlay = document.getElementById('timeLossModal');
         const tbody = document.getElementById('timeLossTableBody');
         
         // 1. Remove the 'hidden' class so display:none !important is cleared
         modalOverlay.classList.remove('hidden');
         
         /* ---------- TABLE ---------- */
         tbody.innerHTML = highValueData.map(row => `
         <tr>
         <td style="font-weight:600">${row.date}</td>
         <td>${row.early}</td>
         <td>${row.late}</td>
         <td>${row.ot}</td>
         <td>${row.break}</td>
         <td style="font-weight:700; color:#ef4444; background:#ffffff">
            ${row.total}
         </td>
         </tr>
         `).join('');
         
         /* ---------- OPEN MODAL ---------- */
         modalOverlay.style.display = 'flex';
         
         /* ---------- INITIAL GRAPH RENDER ---------- */
         const metric = document.getElementById('timeLossMetric')?.value || 'total';
         const modalContainer = document.getElementById('modalContainer');
         
         modalContainer.classList.add('table-mode');
         modalContainer.classList.remove('graph-mode');
         
         renderTimeLossGraph(metric);
         }
         
         
         function getMetricAmount(row, metric) {
         switch (metric) {
         case 'early':
             return row.early.includes('$')
                 ? parseFloat(row.early.split('$')[1])
                 : 0;
         
         case 'late':
             return row.late.includes('$')
                 ? parseFloat(row.late.split('$')[1])
                 : 0;
         
         case 'ot':
             return row.ot.includes('$')
                 ? parseFloat(row.ot.split('$')[1])
                 : 0;
         
         case 'break':
             return row.break.includes('$')
                 ? parseFloat(row.break.split('$')[1])
                 : 0;
         
         case 'total':
         default:
             return row.val;
         }
         }
         
         // Update this section inside your renderTimeLossGraph function
         function renderTimeLossGraph(metric = 'total') {
         const graphViewport = document.getElementById('barGraphContent');
         const values = highValueData.map(row => getMetricAmount(row, metric));
         const maxVal = Math.max(...values) || 1; // Avoid division by zero
         
         graphViewport.innerHTML = `
         <div class="y-axis">
            <span>$${maxVal.toFixed(0)}</span>
            <span>$${(maxVal / 2).toFixed(0)}</span>
            <span>$0</span>
         </div>
         
         <div class="graph-bars">
            ${highValueData.map(row => {
                const val = getMetricAmount(row, metric);
                // Scale height to 85% of container to leave room for labels
                const heightPercentage = (val / maxVal) * 85; 
                
                return `
                    <div class="bar-wrapper">
                        <span class="bar-value-label" style="margin-bottom:8px; font-weight:700;">
                            $${val.toFixed(2)}
                        </span>
                        <div class="bar" style="height:${heightPercentage}%"></div>
                    </div>
                `;
            }).join('')}
         </div>
         
         <div class="x-axis">
            ${highValueData.map(row => `<span>${row.date.substring(0,5)}</span>`).join('')}
         </div>
         `;
         }
         
         function updateTimeLossGraph(metric) {
         renderTimeLossGraph(metric);
         }
         
         
         
         function toggleTimeLossView() {
         const table = document.getElementById('tableView');
         const graph = document.getElementById('graphView');
         const icon = document.getElementById('viewIcon');
         const toolbar = document.getElementById('timeLossGraphToolbar');
         const modal = document.getElementById('modalContainer');
         
         if (table.classList.contains('hidden')) {
         // SWITCH TO TABLE VIEW
         table.classList.remove('hidden');
         graph.classList.add('hidden');
         toolbar.style.display = 'none';
         
         modal.classList.remove('graph-mode');
         modal.classList.add('table-mode');
         
         icon.className = 'bi bi-bar-chart-fill';
         } else {
         // SWITCH TO GRAPH VIEW
         table.classList.add('hidden');
         graph.classList.remove('hidden');
         toolbar.style.display = 'flex';
         
         modal.classList.remove('table-mode');
         modal.classList.add('graph-mode');
         
         icon.className = 'bi bi-table';
         }
         }
         
         function closeModal(e, id) { if(e.target.id === id) document.getElementById(id).style.display = 'none'; }
         
         function openEyeAction() {
         const modal = document.getElementById('eyeActionModal');
         
         modal.classList.remove('hidden');
         modal.style.display = 'flex';
         
         switchEyeView('table');
         renderEyeGraphs('hrs');
         }
         
         
         
         function switchEyeView(view) {
         const table = document.getElementById('eyeTableView');
         const graph = document.getElementById('eyeGraphView');
         
         if (!table || !graph) {
         console.error('Eye modal views not found');
         return;
         }
         
         table.classList.toggle('hidden', view !== 'table');
         graph.classList.toggle('hidden', view !== 'graph');
         
         document.querySelectorAll('.toggle-pill button')
         .forEach(b => b.classList.remove('active'));
         
         const btn = document.querySelector(`.toggle-pill button[onclick*="${view}"]`);
         if (btn) btn.classList.add('active');
         }
         
         
         
         function renderEyeGraphs(type) {
         // 7-day data mapping
         const dataMap = {
         hrs:  [4.5, 5.2, 3.8, 6.0, 5.5, 4.9, 6.1],
         pay:  [90, 105, 75, 120, 110, 98, 130]
         };
         
         const currentData = dataMap[type] || dataMap['hrs'];
         const max = Math.max(...currentData) || 1;
         const labels = ['01/27', '01/28', '01/29', '01/30', '01/31', '02/01', '02/02'];
         
         const container = document.getElementById('eyeGraphContent');
         container.innerHTML = `
         <div class="eye-y-axis" style="border-right: 1px dashed #e2e8f0; padding-right: 15px;">
            <span>${max}</span>
            <span style="opacity: 0.5;">${(max / 2).toFixed(1)}</span>
            <span>0</span>
         </div>
         
         <div class="eye-graph-bars" style="border: none; display: flex; align-items: flex-end; justify-content: space-around; height: 100%;">
            ${currentData.map(v => `
                <div class="bar-column" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex: 1;">
                    <div class="eye-bar-label" style="margin-bottom: 8px; font-weight: 700; font-size: 11px;">
                        ${type === 'hrs' ? v : '$' + v}
                    </div>
                    <div class="eye-bar" style="height: ${(v / max) * 85}%; width: 32px; background: #6366f1; border-radius: 4px 4px 0 0;"></div>
                </div>
            `).join('')}
         </div>
         
         <div class="eye-x-axis" style="margin-top: 15px; padding-left: 65px; display: flex; justify-content: space-around;">
            ${labels.map(l => `<span style="font-size: 11px; color: #94a3b8;">${l}</span>`).join('')}
         </div>
         `;
         }
         
         
         function closeEyeAction() {
         const modal = document.getElementById('eyeActionModal');
         modal.classList.add('hidden');
         modal.style.display = 'none';
         }
         
           window.addEventListener('DOMContentLoaded', () => {
         document.getElementById('timeLossModal').classList.add('hidden');
         });
         
         /**
         * Handles arrow-based navigation through the payroll tabs
         * @param {string} direction - 'next' or 'prev'
         */
         function moveStepper(direction) {
         // 1. Define the order of your tabs (matching your setActiveStep keys)
         const tabOrder = ['fix', 'extra', 'hourly', 'submit'];
         
         // 2. Find the current active step element
         const currentStepEl = document.querySelector('.step-item.active');
         if (!currentStepEl) return;
         
         // 3. Extract the tab key from the onclick attribute
         // Example: onclick="setActiveStep(this, 'extra')" -> 'extra'
         const currentOnclick = currentStepEl.getAttribute('onclick');
         const currentKey = currentOnclick.match(/'([^']+)'/)[1];
         
         // 4. Calculate the new index
         let currentIndex = tabOrder.indexOf(currentKey);
         let newIndex;
         
         if (direction === 'next') {
         newIndex = (currentIndex + 1 < tabOrder.length) ? currentIndex + 1 : 0; // Loop to start or stop at end
         } else {
         newIndex = (currentIndex - 1 >= 0) ? currentIndex - 1 : tabOrder.length - 1; // Loop to end or stop at start
         }
         
         // 5. Find the DOM element for the new index and click it
         const targetKey = tabOrder[newIndex];
         const targetStepEl = document.querySelector(`.step-item[onclick*="${targetKey}"]`);
         
         if (targetStepEl) {
         // We call setActiveStep directly to reuse your existing tab-switching logic
         setActiveStep(targetStepEl, targetKey);
         }
         }
         
         function toggleReportMenu(event) {
         event.stopPropagation();
         const menu = document.getElementById('reportMenu');
         menu.classList.toggle('hidden');
         }
         
         // Close the menu if the user clicks anywhere else on the screen
         window.addEventListener('click', function() {
         const menu = document.getElementById('reportMenu');
         if (menu && !menu.classList.contains('hidden')) {
         menu.classList.add('hidden');
         }
         });
         
      </script>
   </body>
</html>